{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar win$1 = window;\nvar raf = win$1.requestAnimationFrame || win$1.webkitRequestAnimationFrame || win$1.mozRequestAnimationFrame || win$1.msRequestAnimationFrame || function (cb) {\n  return setTimeout(cb, 16);\n};\nvar win = window;\nvar caf = win.cancelAnimationFrame || win.mozCancelAnimationFrame || function (id) {\n  clearTimeout(id);\n};\nfunction extend() {\n  var obj,\n    name,\n    copy,\n    target = arguments[0] || {},\n    i = 1,\n    length = arguments.length;\n  for (; i < length; i++) {\n    if ((obj = arguments[i]) !== null) {\n      for (name in obj) {\n        copy = obj[name];\n        if (target === copy) {\n          continue;\n        } else if (copy !== undefined) {\n          target[name] = copy;\n        }\n      }\n    }\n  }\n  return target;\n}\nfunction checkStorageValue(value) {\n  return ['true', 'false'].indexOf(value) >= 0 ? JSON.parse(value) : value;\n}\nfunction setLocalStorage(storage, key, value, access) {\n  if (access) {\n    try {\n      storage.setItem(key, value);\n    } catch (e) {}\n  }\n  return value;\n}\nfunction getSlideId() {\n  var id = window.tnsId;\n  window.tnsId = !id ? 1 : id + 1;\n  return 'tns' + window.tnsId;\n}\nfunction getBody() {\n  var doc = document,\n    body = doc.body;\n  if (!body) {\n    body = doc.createElement('body');\n    body.fake = true;\n  }\n  return body;\n}\nvar docElement = document.documentElement;\nfunction setFakeBody(body) {\n  var docOverflow = '';\n  if (body.fake) {\n    docOverflow = docElement.style.overflow; //avoid crashing IE8, if background image is used\n\n    body.style.background = ''; //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n\n    body.style.overflow = docElement.style.overflow = 'hidden';\n    docElement.appendChild(body);\n  }\n  return docOverflow;\n}\nfunction resetFakeBody(body, docOverflow) {\n  if (body.fake) {\n    body.remove();\n    docElement.style.overflow = docOverflow; // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n    // eslint-disable-next-line\n\n    docElement.offsetHeight;\n  }\n}\n\n// get css-calc \nfunction calc() {\n  var doc = document,\n    body = getBody(),\n    docOverflow = setFakeBody(body),\n    div = doc.createElement('div'),\n    result = false;\n  body.appendChild(div);\n  try {\n    var str = '(10px * 10)',\n      vals = ['calc' + str, '-moz-calc' + str, '-webkit-calc' + str],\n      val;\n    for (var i = 0; i < 3; i++) {\n      val = vals[i];\n      div.style.width = val;\n      if (div.offsetWidth === 100) {\n        result = val.replace(str, '');\n        break;\n      }\n    }\n  } catch (e) {}\n  body.fake ? resetFakeBody(body, docOverflow) : div.remove();\n  return result;\n}\n\n// get subpixel support value\nfunction percentageLayout() {\n  // check subpixel layout supporting\n  var doc = document,\n    body = getBody(),\n    docOverflow = setFakeBody(body),\n    wrapper = doc.createElement('div'),\n    outer = doc.createElement('div'),\n    str = '',\n    count = 70,\n    perPage = 3,\n    supported = false;\n  wrapper.className = \"tns-t-subp2\";\n  outer.className = \"tns-t-ct\";\n  for (var i = 0; i < count; i++) {\n    str += '<div></div>';\n  }\n  outer.innerHTML = str;\n  wrapper.appendChild(outer);\n  body.appendChild(wrapper);\n  supported = Math.abs(wrapper.getBoundingClientRect().left - outer.children[count - perPage].getBoundingClientRect().left) < 2;\n  body.fake ? resetFakeBody(body, docOverflow) : wrapper.remove();\n  return supported;\n}\nfunction mediaquerySupport() {\n  if (window.matchMedia || window.msMatchMedia) {\n    return true;\n  }\n  var doc = document,\n    body = getBody(),\n    docOverflow = setFakeBody(body),\n    div = doc.createElement('div'),\n    style = doc.createElement('style'),\n    rule = '@media all and (min-width:1px){.tns-mq-test{position:absolute}}',\n    position;\n  style.type = 'text/css';\n  div.className = 'tns-mq-test';\n  body.appendChild(style);\n  body.appendChild(div);\n  if (style.styleSheet) {\n    style.styleSheet.cssText = rule;\n  } else {\n    style.appendChild(doc.createTextNode(rule));\n  }\n  position = window.getComputedStyle ? window.getComputedStyle(div).position : div.currentStyle['position'];\n  body.fake ? resetFakeBody(body, docOverflow) : div.remove();\n  return position === \"absolute\";\n}\n\n// create and append style sheet\nfunction createStyleSheet(media, nonce) {\n  // Create the <style> tag\n  var style = document.createElement(\"style\"); // style.setAttribute(\"type\", \"text/css\");\n  // Add a media (and/or media query) here if you'd like!\n  // style.setAttribute(\"media\", \"screen\")\n  // style.setAttribute(\"media\", \"only screen and (max-width : 1024px)\")\n\n  if (media) {\n    style.setAttribute(\"media\", media);\n  } // Add nonce attribute for Content Security Policy\n\n  if (nonce) {\n    style.setAttribute(\"nonce\", nonce);\n  } // WebKit hack :(\n  // style.appendChild(document.createTextNode(\"\"));\n  // Add the <style> element to the page\n\n  document.querySelector('head').appendChild(style);\n  return style.sheet ? style.sheet : style.styleSheet;\n}\n\n// cross browsers addRule method\nfunction addCSSRule(sheet, selector, rules, index) {\n  // return raf(function() {\n  'insertRule' in sheet ? sheet.insertRule(selector + '{' + rules + '}', index) : sheet.addRule(selector, rules, index); // });\n}\n\n// cross browsers addRule method\nfunction removeCSSRule(sheet, index) {\n  // return raf(function() {\n  'deleteRule' in sheet ? sheet.deleteRule(index) : sheet.removeRule(index); // });\n}\n\nfunction getCssRulesLength(sheet) {\n  var rule = 'insertRule' in sheet ? sheet.cssRules : sheet.rules;\n  return rule.length;\n}\nfunction toDegree(y, x) {\n  return Math.atan2(y, x) * (180 / Math.PI);\n}\nfunction getTouchDirection(angle, range) {\n  var direction = false,\n    gap = Math.abs(90 - Math.abs(angle));\n  if (gap >= 90 - range) {\n    direction = 'horizontal';\n  } else if (gap <= range) {\n    direction = 'vertical';\n  }\n  return direction;\n}\n\n// https://toddmotto.com/ditch-the-array-foreach-call-nodelist-hack/\nfunction forEach(arr, callback, scope) {\n  for (var i = 0, l = arr.length; i < l; i++) {\n    callback.call(scope, arr[i], i);\n  }\n}\nvar classListSupport = ('classList' in document.createElement('_'));\nvar hasClass = classListSupport ? function (el, str) {\n  return el.classList.contains(str);\n} : function (el, str) {\n  return el.className.indexOf(str) >= 0;\n};\nvar addClass = classListSupport ? function (el, str) {\n  if (!hasClass(el, str)) {\n    el.classList.add(str);\n  }\n} : function (el, str) {\n  if (!hasClass(el, str)) {\n    el.className += ' ' + str;\n  }\n};\nvar removeClass = classListSupport ? function (el, str) {\n  if (hasClass(el, str)) {\n    el.classList.remove(str);\n  }\n} : function (el, str) {\n  if (hasClass(el, str)) {\n    el.className = el.className.replace(str, '');\n  }\n};\nfunction hasAttr(el, attr) {\n  return el.hasAttribute(attr);\n}\nfunction getAttr(el, attr) {\n  return el.getAttribute(attr);\n}\nfunction isNodeList(el) {\n  // Only NodeList has the \"item()\" function\n  return typeof el.item !== \"undefined\";\n}\nfunction setAttrs(els, attrs) {\n  els = isNodeList(els) || els instanceof Array ? els : [els];\n  if (Object.prototype.toString.call(attrs) !== '[object Object]') {\n    return;\n  }\n  for (var i = els.length; i--;) {\n    for (var key in attrs) {\n      els[i].setAttribute(key, attrs[key]);\n    }\n  }\n}\nfunction removeAttrs(els, attrs) {\n  els = isNodeList(els) || els instanceof Array ? els : [els];\n  attrs = attrs instanceof Array ? attrs : [attrs];\n  var attrLength = attrs.length;\n  for (var i = els.length; i--;) {\n    for (var j = attrLength; j--;) {\n      els[i].removeAttribute(attrs[j]);\n    }\n  }\n}\nfunction arrayFromNodeList(nl) {\n  var arr = [];\n  for (var i = 0, l = nl.length; i < l; i++) {\n    arr.push(nl[i]);\n  }\n  return arr;\n}\nfunction hideElement(el, forceHide) {\n  if (el.style.display !== 'none') {\n    el.style.display = 'none';\n  }\n}\nfunction showElement(el, forceHide) {\n  if (el.style.display === 'none') {\n    el.style.display = '';\n  }\n}\nfunction isVisible(el) {\n  return window.getComputedStyle(el).display !== 'none';\n}\nfunction whichProperty(props) {\n  if (typeof props === 'string') {\n    var arr = [props],\n      Props = props.charAt(0).toUpperCase() + props.substr(1),\n      prefixes = ['Webkit', 'Moz', 'ms', 'O'];\n    prefixes.forEach(function (prefix) {\n      if (prefix !== 'ms' || props === 'transform') {\n        arr.push(prefix + Props);\n      }\n    });\n    props = arr;\n  }\n  var el = document.createElement('fakeelement');\n  props.length;\n  for (var i = 0; i < props.length; i++) {\n    var prop = props[i];\n    if (el.style[prop] !== undefined) {\n      return prop;\n    }\n  }\n  return false; // explicit for ie9-\n}\n\nfunction has3DTransforms(tf) {\n  if (!tf) {\n    return false;\n  }\n  if (!window.getComputedStyle) {\n    return false;\n  }\n  var doc = document,\n    body = getBody(),\n    docOverflow = setFakeBody(body),\n    el = doc.createElement('p'),\n    has3d,\n    cssTF = tf.length > 9 ? '-' + tf.slice(0, -9).toLowerCase() + '-' : '';\n  cssTF += 'transform'; // Add it to the body to get the computed style\n\n  body.insertBefore(el, null);\n  el.style[tf] = 'translate3d(1px,1px,1px)';\n  has3d = window.getComputedStyle(el).getPropertyValue(cssTF);\n  body.fake ? resetFakeBody(body, docOverflow) : el.remove();\n  return has3d !== undefined && has3d.length > 0 && has3d !== \"none\";\n}\n\n// get transitionend, animationend based on transitionDuration\n// @propin: string\n// @propOut: string, first-letter uppercase\n// Usage: getEndProperty('WebkitTransitionDuration', 'Transition') => webkitTransitionEnd\nfunction getEndProperty(propIn, propOut) {\n  var endProp = false;\n  if (/^Webkit/.test(propIn)) {\n    endProp = 'webkit' + propOut + 'End';\n  } else if (/^O/.test(propIn)) {\n    endProp = 'o' + propOut + 'End';\n  } else if (propIn) {\n    endProp = propOut.toLowerCase() + 'end';\n  }\n  return endProp;\n}\n\n// Test via a getter in the options object to see if the passive property is accessed\nvar supportsPassive = false;\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function () {\n      supportsPassive = true;\n    }\n  });\n  window.addEventListener(\"test\", null, opts);\n} catch (e) {}\nvar passiveOption = supportsPassive ? {\n  passive: true\n} : false;\nfunction addEvents(el, obj, preventScrolling) {\n  for (var prop in obj) {\n    var option = ['touchstart', 'touchmove'].indexOf(prop) >= 0 && !preventScrolling ? passiveOption : false;\n    el.addEventListener(prop, obj[prop], option);\n  }\n}\nfunction removeEvents(el, obj) {\n  for (var prop in obj) {\n    var option = ['touchstart', 'touchmove'].indexOf(prop) >= 0 ? passiveOption : false;\n    el.removeEventListener(prop, obj[prop], option);\n  }\n}\nfunction Events() {\n  return {\n    topics: {},\n    on: function (eventName, fn) {\n      this.topics[eventName] = this.topics[eventName] || [];\n      this.topics[eventName].push(fn);\n    },\n    off: function (eventName, fn) {\n      if (this.topics[eventName]) {\n        for (var i = 0; i < this.topics[eventName].length; i++) {\n          if (this.topics[eventName][i] === fn) {\n            this.topics[eventName].splice(i, 1);\n            break;\n          }\n        }\n      }\n    },\n    emit: function (eventName, data) {\n      data.type = eventName;\n      if (this.topics[eventName]) {\n        this.topics[eventName].forEach(function (fn) {\n          fn(data, eventName);\n        });\n      }\n    }\n  };\n}\nfunction jsTransform(element, attr, prefix, postfix, to, duration, callback) {\n  var tick = Math.min(duration, 10),\n    unit = to.indexOf('%') >= 0 ? '%' : 'px',\n    to = to.replace(unit, ''),\n    from = Number(element.style[attr].replace(prefix, '').replace(postfix, '').replace(unit, '')),\n    positionTick = (to - from) / duration * tick;\n  setTimeout(moveElement, tick);\n  function moveElement() {\n    duration -= tick;\n    from += positionTick;\n    element.style[attr] = prefix + from + unit + postfix;\n    if (duration > 0) {\n      setTimeout(moveElement, tick);\n    } else {\n      callback();\n    }\n  }\n}\n\n// Object.keys\nif (!Object.keys) {\n  Object.keys = function (object) {\n    var keys = [];\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n    return keys;\n  };\n} // ChildNode.remove\n\nif (!(\"remove\" in Element.prototype)) {\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\nvar tns = function (options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n  var doc = document,\n    win = window,\n    KEYS = {\n      ENTER: 13,\n      SPACE: 32,\n      LEFT: 37,\n      RIGHT: 39\n    },\n    tnsStorage = {},\n    localStorageAccess = options.useLocalStorage;\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date();\n    try {\n      tnsStorage = win.localStorage;\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n      if (!localStorageAccess) {\n        tnsStorage = {};\n      }\n    } catch (e) {\n      localStorageAccess = false;\n    }\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function (item) {\n          tnsStorage.removeItem(item);\n        });\n      } // update browserInfo\n\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n    PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n    CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n    TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n    HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n    TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n    TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n    ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n    ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n    TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n    ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess); // get element nodes from selectors\n\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n    tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n    optionsElements = {};\n  tnsList.forEach(function (item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n        el = doc.querySelector(str);\n      optionsElements[item] = str;\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) {\n          console.warn('Can\\'t find', options[item]);\n        }\n        return;\n      }\n    }\n  }); // make sure at least 1 slide\n\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) {\n      console.warn('No slides found in', options.container);\n    }\n    return;\n  } // update options\n\n  var responsive = options.responsive,\n    nested = options.nested,\n    carousel = options.mode === 'carousel' ? true : false;\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n    var responsiveTem = {};\n    for (var key in responsive) {\n      var val = responsive[key]; // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n\n      val = typeof val === 'number' ? {\n        items: val\n      } : val;\n      responsiveTem[key] = val;\n    }\n    responsive = responsiveTem;\n    responsiveTem = null;\n  } // update options\n\n  function updateOptions(obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') {\n          obj[key] = 'page';\n        }\n        if (key === 'edgePadding') {\n          obj[key] = false;\n        }\n        if (key === 'autoHeight') {\n          obj[key] = false;\n        }\n      } // update responsive options\n\n      if (key === 'responsive') {\n        updateOptions(obj[key]);\n      }\n    }\n  }\n  if (!carousel) {\n    updateOptions(options);\n  } // === define and set variables ===\n\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n    var animateIn = options.animateIn,\n      animateOut = options.animateOut,\n      animateDelay = options.animateDelay,\n      animateNormal = options.animateNormal;\n  }\n  var horizontal = options.axis === 'horizontal' ? true : false,\n    outerWrapper = doc.createElement('div'),\n    innerWrapper = doc.createElement('div'),\n    middleWrapper,\n    container = options.container,\n    containerParent = container.parentNode,\n    containerHTML = container.outerHTML,\n    slideItems = container.children,\n    slideCount = slideItems.length,\n    breakpointZone,\n    windowWidth = getWindowWidth(),\n    isOn = false;\n  if (responsive) {\n    setBreakpointZone();\n  }\n  if (carousel) {\n    container.className += ' tns-vpfix';\n  } // fixedWidth: viewport > rightBoundary > indexMax\n\n  var autoWidth = options.autoWidth,\n    fixedWidth = getOption('fixedWidth'),\n    edgePadding = getOption('edgePadding'),\n    gutter = getOption('gutter'),\n    viewport = getViewportWidth(),\n    center = getOption('center'),\n    items = !autoWidth ? Math.floor(getOption('items')) : 1,\n    slideBy = getOption('slideBy'),\n    viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n    arrowKeys = getOption('arrowKeys'),\n    speed = getOption('speed'),\n    rewind = options.rewind,\n    loop = rewind ? false : options.loop,\n    autoHeight = getOption('autoHeight'),\n    controls = getOption('controls'),\n    controlsText = getOption('controlsText'),\n    nav = getOption('nav'),\n    touch = getOption('touch'),\n    mouseDrag = getOption('mouseDrag'),\n    autoplay = getOption('autoplay'),\n    autoplayTimeout = getOption('autoplayTimeout'),\n    autoplayText = getOption('autoplayText'),\n    autoplayHoverPause = getOption('autoplayHoverPause'),\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n    sheet = createStyleSheet(null, getOption('nonce')),\n    lazyload = options.lazyload,\n    lazyloadSelector = options.lazyloadSelector,\n    slidePositions,\n    // collection of slide positions\n    slideItemsOut = [],\n    cloneCount = loop ? getCloneCountForLoop() : 0,\n    slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n    hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n    rightBoundary = fixedWidth ? getRightBoundary() : null,\n    updateIndexBeforeTransform = !carousel || !loop ? true : false,\n    // transform\n    transformAttr = horizontal ? 'left' : 'top',\n    transformPrefix = '',\n    transformPostfix = '',\n    // index\n    getIndexMax = function () {\n      if (fixedWidth) {\n        return function () {\n          return center && !loop ? slideCount - 1 : Math.ceil(-rightBoundary / (fixedWidth + gutter));\n        };\n      } else if (autoWidth) {\n        return function () {\n          for (var i = 0; i < slideCountNew; i++) {\n            if (slidePositions[i] >= -rightBoundary) {\n              return i;\n            }\n          }\n        };\n      } else {\n        return function () {\n          if (center && carousel && !loop) {\n            return slideCount - 1;\n          } else {\n            return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n          }\n        };\n      }\n    }(),\n    index = getStartIndex(getOption('startIndex')),\n    indexCached = index;\n  getCurrentSlide();\n  var indexMin = 0,\n    indexMax = !autoWidth ? getIndexMax() : null,\n    preventActionWhenRunning = options.preventActionWhenRunning,\n    swipeAngle = options.swipeAngle,\n    moveDirectionExpected = swipeAngle ? '?' : true,\n    running = false,\n    onInit = options.onInit,\n    events = new Events(),\n    // id, class\n    newContainerClasses = ' tns-slider tns-' + options.mode,\n    slideId = container.id || getSlideId(),\n    disable = getOption('disable'),\n    disabled = false,\n    freezable = options.freezable,\n    freeze = freezable && !autoWidth ? getFreeze() : false,\n    frozen = false,\n    controlsEvents = {\n      'click': onControlsClick,\n      'keydown': onControlsKeydown\n    },\n    navEvents = {\n      'click': onNavClick,\n      'keydown': onNavKeydown\n    },\n    hoverEvents = {\n      'mouseover': mouseoverPause,\n      'mouseout': mouseoutRestart\n    },\n    visibilityEvent = {\n      'visibilitychange': onVisibilityChange\n    },\n    docmentKeydownEvent = {\n      'keydown': onDocumentKeydown\n    },\n    touchEvents = {\n      'touchstart': onPanStart,\n      'touchmove': onPanMove,\n      'touchend': onPanEnd,\n      'touchcancel': onPanEnd\n    },\n    dragEvents = {\n      'mousedown': onPanStart,\n      'mousemove': onPanMove,\n      'mouseup': onPanEnd,\n      'mouseleave': onPanEnd\n    },\n    hasControls = hasOption('controls'),\n    hasNav = hasOption('nav'),\n    navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n    hasAutoplay = hasOption('autoplay'),\n    hasTouch = hasOption('touch'),\n    hasMouseDrag = hasOption('mouseDrag'),\n    slideActiveClass = 'tns-slide-active',\n    slideClonedClass = 'tns-slide-cloned',\n    imgCompleteClass = 'tns-complete',\n    imgEvents = {\n      'load': onImgLoaded,\n      'error': onImgFailed\n    },\n    imgsComplete,\n    liveregionCurrent,\n    preventScroll = options.preventScrollOnTouch === 'force' ? true : false; // controls\n\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n      controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n      prevButton = options.prevButton,\n      nextButton = options.nextButton,\n      prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n      nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n      prevIsButton,\n      nextIsButton;\n  } // nav\n\n  if (hasNav) {\n    var navContainer = options.navContainer,\n      navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n      navItems,\n      pages = autoWidth ? slideCount : getPages(),\n      pagesCached = 0,\n      navClicked = -1,\n      navCurrentIndex = getCurrentNavIndex(),\n      navCurrentIndexCached = navCurrentIndex,\n      navActiveClass = 'tns-nav-active',\n      navStr = 'Carousel Page ',\n      navStrCurrent = ' (Current Slide)';\n  } // autoplay\n\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n      autoplayButton = options.autoplayButton,\n      autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n      autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n      autoplayTimer,\n      animating,\n      autoplayHoverPaused,\n      autoplayUserPaused,\n      autoplayVisibilityPaused;\n  }\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n      lastPosition = {},\n      translateInit,\n      panStart = false,\n      rafIndex,\n      getDist = horizontal ? function (a, b) {\n        return a.x - b.x;\n      } : function (a, b) {\n        return a.y - b.y;\n      };\n  } // disable slider when slidecount <= items\n\n  if (!autoWidth) {\n    resetVariblesWhenDisable(disable || freeze);\n  }\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n  }\n  if (carousel) {\n    container.className = container.className.replace('tns-vpfix', '');\n  }\n  initStructure();\n  initSheet();\n  initSliderTransform(); // === COMMON FUNCTIONS === //\n\n  function resetVariblesWhenDisable(condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n  function getCurrentSlide() {\n    var tem = carousel ? index - cloneCount : index;\n    while (tem < 0) {\n      tem += slideCount;\n    }\n    return tem % slideCount + 1;\n  }\n  function getStartIndex(ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n  function getAbsIndex(i) {\n    if (i == null) {\n      i = index;\n    }\n    if (carousel) {\n      i -= cloneCount;\n    }\n    while (i < 0) {\n      i += slideCount;\n    }\n    return Math.floor(i % slideCount);\n  }\n  function getCurrentNavIndex() {\n    var absIndex = getAbsIndex(),\n      result;\n    result = navAsThumbnails ? absIndex : fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) : Math.floor(absIndex / items); // set active nav to the last one when reaches the right edge\n\n    if (!loop && carousel && index === indexMax) {\n      result = pages - 1;\n    }\n    return result;\n  }\n  function getItemsMax() {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || fixedWidth && !viewportMax) {\n      return slideCount - 1; // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n        arr = [];\n      if (fixedWidth || options[str] < slideCount) {\n        arr.push(options[str]);\n      }\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n          if (tem && (fixedWidth || tem < slideCount)) {\n            arr.push(tem);\n          }\n        }\n      }\n      if (!arr.length) {\n        arr.push(0);\n      }\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n  function getCloneCountForLoop() {\n    var itemsMax = getItemsMax(),\n      result = carousel ? Math.ceil((itemsMax * 5 - slideCount) / 2) : itemsMax * 4 - slideCount;\n    result = Math.max(itemsMax, result);\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n  function getWindowWidth() {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n  function getInsertPosition(pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n  function getClientWidth(el) {\n    if (el == null) {\n      return;\n    }\n    var div = doc.createElement('div'),\n      rect,\n      width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n  function getViewportWidth() {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n  function hasOption(item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n  } // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n\n  function getOption(item, ww) {\n    if (ww == null) {\n      ww = windowWidth;\n    }\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n    } else {\n      var result = options[item];\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) {\n              result = responsive[bp][item];\n            }\n          }\n        }\n      }\n      if (item === 'slideBy' && result === 'page') {\n        result = getOption('items');\n      }\n      if (!carousel && (item === 'slideBy' || item === 'items')) {\n        result = Math.floor(result);\n      }\n      return result;\n    }\n  }\n  function getSlideMarginLeft(i) {\n    return CALC ? CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' : i * 100 / slideCountNew + '%';\n  }\n  function getInnerWrapperStyles(edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n      if (gutterTem) {\n        gap -= gutterTem;\n      }\n      str = horizontal ? 'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' : 'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n        dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';';\n    }\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) {\n      str += getTransitionDurationStyle(speedTem);\n    }\n    return str;\n  }\n  function getContainerWidth(fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ? CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' : slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n  function getSlideWidthStyle(fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n    if (fixedWidthTem) {\n      width = fixedWidthTem + gutterTem + 'px';\n    } else {\n      if (!carousel) {\n        itemsTem = Math.floor(itemsTem);\n      }\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ? CALC + '(100% / ' + dividend + ')' : 100 / dividend + '%';\n    }\n    width = 'width:' + width; // inner slider: overwrite outer slider styles\n\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n  function getSlideGutterStyle(gutterTem) {\n    var str = ''; // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n        dir = horizontal ? 'right' : 'bottom';\n      str = prop + dir + ': ' + gutterTem + 'px;';\n    }\n    return str;\n  }\n  function getCSSPrefix(name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n    if (prefix) {\n      prefix = '-' + prefix + '-';\n    }\n    return prefix;\n  }\n  function getTransitionDurationStyle(speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n  function getAnimationDurationStyle(speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n  function initStructure() {\n    var classOuter = 'tns-outer',\n      classInner = 'tns-inner';\n    hasOption('gutter');\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw'; // set container properties\n\n    if (container.id === '') {\n      container.id = slideId;\n    }\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n    if (autoWidth) {\n      newContainerClasses += ' tns-autowidth';\n    }\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses; // add constrain layer for carousel\n\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container); // add id, class, aria attributes\n    // before clone slides\n\n    forEach(slideItems, function (item, i) {\n      addClass(item, 'tns-item');\n      if (!item.id) {\n        item.id = slideId + '-item' + i;\n      }\n      if (!carousel && animateNormal) {\n        addClass(item, animateNormal);\n      }\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    }); // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n        fragmentAfter = doc.createDocumentFragment();\n      for (var j = cloneCount; j--;) {\n        var num = j % slideCount,\n          cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n  }\n  function initSliderTransform() {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img'); // add img load event listener\n\n      forEach(imgs, function (img) {\n        var src = img.src;\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n            img.src = src; // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      }); // set imgsComplete\n\n      raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), function () {\n          imgsComplete = true;\n        });\n      }); // reset imgs for auto height: check visible imgs only\n\n      if (hasOption('autoHeight')) {\n        imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1));\n      }\n      lazyload ? initSliderTransformStyleCheck() : raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck);\n      });\n    } else {\n      // set container transform property\n      if (carousel) {\n        doContainerTransformSilent();\n      } // update slider tools and events\n\n      initTools();\n      initEvents();\n    }\n  }\n  function initSliderTransformStyleCheck() {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n        Math.abs(left - right) <= 1 ? initSliderTransformCore() : setTimeout(function () {\n          stylesApplicationCheck();\n        }, 16);\n      })();\n    } else {\n      initSliderTransformCore();\n    }\n  }\n  function initSliderTransformCore() {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n        if (freezable) {\n          freeze = getFreeze();\n        }\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    } // set container transform property\n\n    if (carousel) {\n      doContainerTransformSilent();\n    } // update slider tools and events\n\n    initTools();\n    initEvents();\n  }\n  function initSheet() {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // #### LAYOUT\n    // ## INLINE-BLOCK VS FLOAT\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    } // ## BASIC STYLES\n\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      } // inner wrapper styles\n\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet)); // container styles\n\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      } // slide styles\n\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n      if (options.gutter) {\n        str += getSlideGutterStyle(options.gutter);\n      } // set gallery items transition-duration\n\n      if (!carousel) {\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n        if (ANIMATIONDURATION) {\n          str += getAnimationDurationStyle(speed);\n        }\n      }\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      } // non CSS mediaqueries: IE8\n      // ## update inner wrapper, container, slides if needed\n      // set inline styles for inner wrapper & container\n      // insert stylesheet (one line) for slides only (since slides are many)\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration(); // inner wrapper styles\n\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight); // container styles\n\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      } // slide styles\n\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n      if (gutter) {\n        str += getSlideGutterStyle(gutter);\n      } // append to the last line\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      }\n    } // ## MEDIAQUERIES\n\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n        var opts = responsive[bp],\n          str = '',\n          middleWrapperStr = '',\n          innerWrapperStr = '',\n          containerStr = '',\n          slideStr = '',\n          itemsBP = !autoWidth ? getOption('items', bp) : null,\n          fixedWidthBP = getOption('fixedWidth', bp),\n          speedBP = getOption('speed', bp),\n          edgePaddingBP = getOption('edgePadding', bp),\n          autoHeightBP = getOption('autoHeight', bp),\n          gutterBP = getOption('gutter', bp); // middle wrapper string\n\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        } // inner wrapper string\n\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        } // container string\n\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || fixedWidth && 'gutter' in opts)) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        } // slide string\n\n        if ('fixedWidth' in opts || fixedWidth && 'gutter' in opts || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        } // set gallery items transition-duration\n\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) {\n            slideStr += getTransitionDurationStyle(speedBP);\n          }\n          if (ANIMATIONDURATION) {\n            slideStr += getAnimationDurationStyle(speedBP);\n          }\n        }\n        if (slideStr) {\n          slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}';\n        } // add up\n\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n  function initTools() {\n    // == slides ==\n    updateSlideStatus(); // == live region ==\n\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current'); // == autoplayInit ==\n\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {\n          'data-action': txt\n        });\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      } // add event\n\n      if (autoplayButton) {\n        addEvents(autoplayButton, {\n          'click': toggleAutoplay\n        });\n      }\n      if (autoplay) {\n        startAutoplay();\n        if (autoplayHoverPause) {\n          addEvents(container, hoverEvents);\n        }\n        if (autoplayResetOnVisibility) {\n          addEvents(container, visibilityEvent);\n        }\n      }\n    } // == navInit ==\n\n    if (hasNav) {\n      // will not hide the navs in case they're thumbnails\n\n      if (navContainer) {\n        setAttrs(navContainer, {\n          'aria-label': 'Carousel Pagination'\n        });\n        navItems = navContainer.children;\n        forEach(navItems, function (item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId\n          });\n        }); // generated nav\n      } else {\n        var navHtml = '',\n          hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i + '\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) + '\"></button>';\n        }\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n      updateNavVisibility(); // add transition\n\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n          str = 'transition: all ' + speed / 1000 + 's';\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n      setAttrs(navItems[navCurrentIndex], {\n        'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n      });\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass); // add events\n\n      addEvents(navContainer, navEvents);\n    } // == controlsInit ==\n\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[1] + '</button></div>');\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1'\n        });\n      }\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs(prevButton, {\n          'data-controls': 'prev'\n        });\n        setAttrs(nextButton, {\n          'data-controls': 'next'\n        });\n      }\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n      updateControlsStatus(); // add events\n\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    } // hide tools if needed\n\n    disableUI();\n  }\n  function initEvents() {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n    if (touch) {\n      addEvents(container, touchEvents, options.preventScrollOnTouch);\n    }\n    if (mouseDrag) {\n      addEvents(container, dragEvents);\n    }\n    if (arrowKeys) {\n      addEvents(doc, docmentKeydownEvent);\n    }\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {\n        'resize': onResize\n      });\n    }\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) {\n        doAutoHeight();\n      }\n    }\n    doLazyLoad();\n    if (disable) {\n      disableSlider();\n    } else if (freeze) {\n      freezeSlider();\n    }\n    events.on('indexChanged', additionalUpdates);\n    if (nested === 'inner') {\n      events.emit('innerLoaded', info());\n    }\n    if (typeof onInit === 'function') {\n      onInit(info());\n    }\n    isOn = true;\n  }\n  function destroy() {\n    // sheet\n    sheet.disabled = true;\n    if (sheet.ownerNode) {\n      sheet.ownerNode.remove();\n    } // remove win event listeners\n\n    removeEvents(win, {\n      'resize': onResize\n    }); // arrowKeys, controls, nav\n\n    if (arrowKeys) {\n      removeEvents(doc, docmentKeydownEvent);\n    }\n    if (controlsContainer) {\n      removeEvents(controlsContainer, controlsEvents);\n    }\n    if (navContainer) {\n      removeEvents(navContainer, navEvents);\n    } // autoplay\n\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n    if (autoplayButton) {\n      removeEvents(autoplayButton, {\n        'click': toggleAutoplay\n      });\n    }\n    if (autoplay) {\n      clearInterval(autoplayTimer);\n    } // container\n\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n    if (touch) {\n      removeEvents(container, touchEvents);\n    }\n    if (mouseDrag) {\n      removeEvents(container, dragEvents);\n    } // cache Object values in options && reset HTML\n\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n    tnsList.forEach(function (item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n          parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    }); // reset variables\n\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = panStart = rafIndex = getDist = touch = mouseDrag = null; // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') {\n        this[a] = null;\n      }\n    }\n    isOn = false;\n  } // === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n\n  function onResize(e) {\n    raf(function () {\n      resizeTasks(getEvent(e));\n    });\n  }\n  function resizeTasks(e) {\n    if (!isOn) {\n      return;\n    }\n    if (nested === 'outer') {\n      events.emit('outerResized', info(e));\n    }\n    windowWidth = getWindowWidth();\n    var bpChanged,\n      breakpointZoneTem = breakpointZone,\n      needContainerTransform = false;\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone; // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n\n      if (bpChanged) {\n        events.emit('newBreakpointStart', info(e));\n      }\n    }\n    var indChanged,\n      itemsChanged,\n      itemsTem = items,\n      disableTem = disable,\n      freezeTem = freeze,\n      arrowKeysTem = arrowKeys,\n      controlsTem = controls,\n      navTem = nav,\n      touchTem = touch,\n      mouseDragTem = mouseDrag,\n      autoplayTem = autoplay,\n      autoplayHoverPauseTem = autoplayHoverPause,\n      autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n      indexTem = index;\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n        autoHeightTem = autoHeight,\n        controlsTextTem = controlsText,\n        centerTem = center,\n        autoplayTextTem = autoplayText;\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n          edgePaddingTem = edgePadding;\n      }\n    } // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    } // update options\n\n    resetVariblesWhenDisable(disable);\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n\n        needContainerTransform = true;\n      }\n    }\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n      // fixedWidth: <= viewport, fixedWidth, gutter\n\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n      // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) {\n          indexMax = getIndexMax();\n        } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n\n        updateIndex();\n      }\n    }\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n      // <= fixedWidth: fixedWidth, gutter, rightBoundary\n      // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n\n    if (!autoplay) {\n      autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ? addEvents(doc, docmentKeydownEvent) : removeEvents(doc, docmentKeydownEvent);\n    }\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            showElement(prevButton);\n          }\n          if (nextButton) {\n            showElement(nextButton);\n          }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            hideElement(prevButton);\n          }\n          if (nextButton) {\n            hideElement(nextButton);\n          }\n        }\n      }\n    }\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer);\n      }\n    }\n    if (touch !== touchTem) {\n      touch ? addEvents(container, touchEvents, options.preventScrollOnTouch) : removeEvents(container, touchEvents);\n    }\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ? addEvents(container, dragEvents) : removeEvents(container, dragEvents);\n    }\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) {\n          showElement(autoplayButton);\n        }\n        if (!animating && !autoplayUserPaused) {\n          startAutoplay();\n        }\n      } else {\n        if (autoplayButton) {\n          hideElement(autoplayButton);\n        }\n        if (animating) {\n          stopAutoplay();\n        }\n      }\n    }\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ? addEvents(container, hoverEvents) : removeEvents(container, hoverEvents);\n    }\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ? addEvents(doc, visibilityEvent) : removeEvents(doc, visibilityEvent);\n    }\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) {\n        needContainerTransform = true;\n      }\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) {\n          innerWrapper.style.height = '';\n        }\n      }\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n          html = autoplayButton.innerHTML,\n          len = html.length - autoplayTextTem[i].length;\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) {\n        needContainerTransform = true;\n      }\n    }\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n    indChanged = index !== indexTem;\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) {\n        additionalUpdates();\n      }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n    if (itemsChanged && !carousel) {\n      updateGallerySlidePositions();\n    }\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          } // slide styles\n\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) + getSlideGutterStyle(gutter); // remove the last line and\n          // add new styles\n\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      } // auto height\n\n      if (autoHeight) {\n        doAutoHeight();\n      }\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n    if (bpChanged) {\n      events.emit('newBreakpointEnd', info(e));\n    }\n  } // === INITIALIZATION FUNCTIONS === //\n\n  function getFreeze() {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return slideCount <= a;\n    }\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n      vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n    return width <= vp;\n  }\n  function setBreakpointZone() {\n    breakpointZone = 0;\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n\n      if (windowWidth >= bp) {\n        breakpointZone = bp;\n      }\n    }\n  } // (slideBy, indexMin, indexMax) => index\n\n  var updateIndex = function () {\n    return loop ? carousel ?\n    // loop + carousel\n    function () {\n      var leftEdge = indexMin,\n        rightEdge = indexMax;\n      leftEdge += slideBy;\n      rightEdge -= slideBy; // adjust edges when has edge paddings\n      // or fixed-width slider with extra space on the right side\n\n      if (edgePadding) {\n        leftEdge += 1;\n        rightEdge -= 1;\n      } else if (fixedWidth) {\n        if ((viewport + gutter) % (fixedWidth + gutter)) {\n          rightEdge -= 1;\n        }\n      }\n      if (cloneCount) {\n        if (index > rightEdge) {\n          index -= slideCount;\n        } else if (index < leftEdge) {\n          index += slideCount;\n        }\n      }\n    } :\n    // loop + gallery\n    function () {\n      if (index > indexMax) {\n        while (index >= indexMin + slideCount) {\n          index -= slideCount;\n        }\n      } else if (index < indexMin) {\n        while (index <= indexMax - slideCount) {\n          index += slideCount;\n        }\n      }\n    } :\n    // non-loop\n    function () {\n      index = Math.max(indexMin, Math.min(indexMax, index));\n    };\n  }();\n  function disableUI() {\n    if (!autoplay && autoplayButton) {\n      hideElement(autoplayButton);\n    }\n    if (!nav && navContainer) {\n      hideElement(navContainer);\n    }\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          hideElement(prevButton);\n        }\n        if (nextButton) {\n          hideElement(nextButton);\n        }\n      }\n    }\n  }\n  function enableUI() {\n    if (autoplay && autoplayButton) {\n      showElement(autoplayButton);\n    }\n    if (nav && navContainer) {\n      showElement(navContainer);\n    }\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          showElement(prevButton);\n        }\n        if (nextButton) {\n          showElement(nextButton);\n        }\n      }\n    }\n  }\n  function freezeSlider() {\n    if (frozen) {\n      return;\n    } // remove edge padding from inner wrapper\n\n    if (edgePadding) {\n      innerWrapper.style.margin = '0px';\n    } // add class tns-transparent to cloned slides\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          addClass(slideItems[i], str);\n        }\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n    disableUI();\n    frozen = true;\n  }\n  function unfreezeSlider() {\n    if (!frozen) {\n      return;\n    } // restore edge padding for inner wrapper\n    // for mordern browsers\n\n    if (edgePadding && CSSMQ) {\n      innerWrapper.style.margin = '';\n    } // remove class tns-transparent to cloned slides\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          removeClass(slideItems[i], str);\n        }\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n    enableUI();\n    frozen = false;\n  }\n  function disableSlider() {\n    if (disabled) {\n      return;\n    }\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          hideElement(slideItems[j]);\n        }\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // vertical slider\n\n    if (!horizontal || !carousel) {\n      removeAttrs(innerWrapper, ['style']);\n    } // gallery\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // update tools\n\n    disableUI();\n    disabled = true;\n  }\n  function enableSlider() {\n    if (!disabled) {\n      return;\n    }\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          showElement(slideItems[j]);\n        }\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // gallery\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n          classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    } // update tools\n\n    enableUI();\n    disabled = false;\n  }\n  function updateLiveRegion() {\n    var str = getLiveRegionStr();\n    if (liveregionCurrent.innerHTML !== str) {\n      liveregionCurrent.innerHTML = str;\n    }\n  }\n  function getLiveRegionStr() {\n    var arr = getVisibleSlideRange(),\n      start = arr[0] + 1,\n      end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n  function getVisibleSlideRange(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n    var start = index,\n      end,\n      rangestart,\n      rangeend; // get range start, range end for autoWidth and fixedWidth\n\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = -(parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    } // get start, end\n    // - check auto width\n\n    if (autoWidth) {\n      slidePositions.forEach(function (point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) {\n            start = i;\n          }\n          if (rangeend - point >= 0.5) {\n            end = i;\n          }\n        }\n      }); // - check percentage width, fixed width\n    } else {\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n        if (center || edgePadding) {\n          start = Math.floor(rangestart / cell);\n          end = Math.ceil(rangeend / cell - 1);\n        } else {\n          end = start + Math.ceil(viewport / cell) - 1;\n        }\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n    return [start, end];\n  }\n  function doLazyLoad() {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n          eve[TRANSITIONEND] = function (e) {\n            e.stopPropagation();\n          };\n          addEvents(img, eve);\n          addEvents(img, imgEvents); // update src\n\n          img.src = getAttr(img, 'data-src'); // update srcset\n\n          var srcset = getAttr(img, 'data-srcset');\n          if (srcset) {\n            img.srcset = srcset;\n          }\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n  function onImgLoaded(e) {\n    imgLoaded(getTarget(e));\n  }\n  function onImgFailed(e) {\n    imgFailed(getTarget(e));\n  }\n  function imgLoaded(img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n  function imgFailed(img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n  function imgCompleted(img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n  function getImageArray(start, end, imgSelector) {\n    var imgs = [];\n    if (!imgSelector) {\n      imgSelector = 'img';\n    }\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) {\n        imgs.push(img);\n      });\n      start++;\n    }\n    return imgs;\n  } // check if all visible images are loaded\n  // and update container height if it's done\n\n  function doAutoHeight() {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function () {\n      imgsLoadedCheck(imgs, updateInnerWrapperHeight);\n    });\n  }\n  function imgsLoadedCheck(imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) {\n      return cb();\n    } // check image classes\n\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) {\n        imgCompleted(img);\n      } // Check image.complete\n\n      if (hasClass(img, imgCompleteClass)) {\n        imgs.splice(index, 1);\n      }\n    }); // execute callback function if selected images are all complete\n\n    if (!imgs.length) {\n      return cb();\n    } // otherwise execute this functiona again\n\n    raf(function () {\n      imgsLoadedCheck(imgs, cb);\n    });\n  }\n  function additionalUpdates() {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n  function update_carousel_transition_duration() {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n  function getMaxSlideHeight(slideStart, slideRange) {\n    var heights = [];\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n    return Math.max.apply(null, heights);\n  } // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n\n  function updateInnerWrapperHeight() {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n      wp = middleWrapper ? middleWrapper : innerWrapper;\n    if (wp.style.height !== maxHeight) {\n      wp.style.height = maxHeight + 'px';\n    }\n  } // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n\n  function setSlidePositions() {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n      attr2 = horizontal ? 'right' : 'bottom',\n      base = slideItems[0].getBoundingClientRect()[attr];\n    forEach(slideItems, function (item, i) {\n      // skip the first slide\n      if (i) {\n        slidePositions.push(item.getBoundingClientRect()[attr] - base);\n      } // add the end edge\n\n      if (i === slideCountNew - 1) {\n        slidePositions.push(item.getBoundingClientRect()[attr2] - base);\n      }\n    });\n  } // update slide\n\n  function updateSlideStatus() {\n    var range = getVisibleSlideRange(),\n      start = range[0],\n      end = range[1];\n    forEach(slideItems, function (item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        } // hide slides\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  } // gallery: update slide position\n\n  function updateGallerySlidePositions() {\n    var l = index + Math.min(slideCount, items);\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      } // remove outlet animation\n\n      removeClass(item, animateOut);\n    } // removing '.tns-moving'\n\n    setTimeout(function () {\n      forEach(slideItems, function (el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  } // set tabindex on Nav\n\n  function updateNavStatus() {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n          navCurrent = navItems[navCurrentIndex];\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n        setAttrs(navCurrent, {\n          'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n        });\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n  function getLowerCaseNodeName(el) {\n    return el.nodeName.toLowerCase();\n  }\n  function isButton(el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n  function isAriaDisabled(el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n  function disEnableElement(isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  } // set 'disabled' to true on controls when reach the edges\n\n  function updateControlsStatus() {\n    if (!controls || rewind || loop) {\n      return;\n    }\n    var prevDisabled = prevIsButton ? prevButton.disabled : isAriaDisabled(prevButton),\n      nextDisabled = nextIsButton ? nextButton.disabled : isAriaDisabled(nextButton),\n      disablePrev = index <= indexMin ? true : false,\n      disableNext = !rewind && index >= indexMax ? true : false;\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  } // set duration\n\n  function resetDuration(el, str) {\n    if (TRANSITIONDURATION) {\n      el.style[TRANSITIONDURATION] = str;\n    }\n  }\n  function getSliderWidth() {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n  function getCenterGap(num) {\n    if (num == null) {\n      num = index;\n    }\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? (viewport - gap - (slidePositions[num + 1] - slidePositions[num] - gutter)) / 2 : fixedWidth ? (viewport - fixedWidth) / 2 : (items - 1) / 2;\n  }\n  function getRightBoundary() {\n    var gap = edgePadding ? gutter : 0,\n      result = viewport + gap - getSliderWidth();\n    if (center && !loop) {\n      result = fixedWidth ? -(fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() : getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n    if (result > 0) {\n      result = 0;\n    }\n    return result;\n  }\n  function getContainerTransformValue(num) {\n    if (num == null) {\n      num = index;\n    }\n    var val;\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = -(fixedWidth + gutter) * num;\n        if (center) {\n          val += getCenterGap();\n        }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n        if (center) {\n          num -= getCenterGap();\n        }\n        val = -num * 100 / denominator;\n      }\n    } else {\n      val = -slidePositions[num];\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n    if (hasRightDeadZone) {\n      val = Math.max(val, rightBoundary);\n    }\n    val += horizontal && !autoWidth && !fixedWidth ? '%' : 'px';\n    return val;\n  }\n  function doContainerTransformSilent(val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n  function doContainerTransform(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n  function animateSlide(number, classOut, classIn, isOut) {\n    var l = number + items;\n    if (!loop) {\n      l = Math.min(l, slideCountNew);\n    }\n    for (var i = number; i < l; i++) {\n      var item = slideItems[i]; // set item positions\n\n      if (!isOut) {\n        item.style.left = (i - index) * 100 / items + '%';\n      }\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n      removeClass(item, classOut);\n      addClass(item, classIn);\n      if (isOut) {\n        slideItemsOut.push(item);\n      }\n    }\n  } // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n\n  var transformCore = function () {\n    return carousel ? function () {\n      resetDuration(container, '');\n      if (TRANSITIONDURATION || !speed) {\n        // for morden browsers with non-zero duration or\n        // zero duration for all browsers\n        doContainerTransform(); // run fallback function manually\n        // when duration is 0 / container is hidden\n\n        if (!speed || !isVisible(container)) {\n          onTransitionEnd();\n        }\n      } else {\n        // for old browser with non-zero duration\n        jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n      }\n      if (!horizontal) {\n        updateContentWrapperHeight();\n      }\n    } : function () {\n      slideItemsOut = [];\n      var eve = {};\n      eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n      removeEvents(slideItems[indexCached], eve);\n      addEvents(slideItems[index], eve);\n      animateSlide(indexCached, animateIn, animateOut, true);\n      animateSlide(index, animateNormal, animateIn); // run fallback function manually\n      // when transition or animation not supported / duration is 0\n\n      if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) {\n        onTransitionEnd();\n      }\n    };\n  }();\n  function render(e, sliderMoved) {\n    if (updateIndexBeforeTransform) {\n      updateIndex();\n    } // render when slider was moved (touch or drag) even though index may not change\n\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n      if (autoHeight) {\n        doAutoHeight();\n      } // pause autoplay when click or keydown from user\n\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) {\n        stopAutoplay();\n      }\n      running = true;\n      transformCore();\n    }\n  }\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n\n  function strTrans(str) {\n    return str.toLowerCase().replace(/-/g, '');\n  } // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n\n  function onTransitionEnd(event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i]; // set item positions\n\n          item.style.left = '';\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n\n      if (!event || !carousel && event.target.parentNode === container || event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n            doContainerTransformSilent();\n          }\n        }\n        if (nested === 'inner') {\n          events.emit('innerLoaded', info());\n        }\n        running = false;\n        indexCached = index;\n      }\n    }\n  } // # ACTIONS\n\n  function goTo(targetIndex, e) {\n    if (freeze) {\n      return;\n    } // prev slideBy\n\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1); // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1); // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) {\n          return;\n        } else {\n          onTransitionEnd();\n        }\n      }\n      var absIndex = getAbsIndex(),\n        indexGap = 0;\n      if (targetIndex === 'first') {\n        indexGap = -absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') {\n          targetIndex = parseInt(targetIndex);\n        }\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) {\n            targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex));\n          }\n          indexGap = targetIndex - absIndex;\n        }\n      } // gallery: make sure new page won't overlap with current page\n\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += index + indexGap - slideCount >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n      index += indexGap; // make sure index is in range\n\n      if (carousel && loop) {\n        if (index < indexMin) {\n          index += slideCount;\n        }\n        if (index > indexMax) {\n          index -= slideCount;\n        }\n      } // if index is changed, start rendering\n\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n    }\n  } // on controls click\n\n  function onControlsClick(e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n    var passEventObject;\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) {\n        target = target.parentNode;\n      }\n      var targetIn = [prevButton, nextButton].indexOf(target);\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n    if (dir) {\n      index += slideBy * dir;\n      if (autoWidth) {\n        index = Math.floor(index);\n      } // pass e when click control buttons or keydown\n\n      render(passEventObject || e && e.type === 'keydown' ? e : null);\n    }\n  } // on nav click\n\n  function onNavClick(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n    e = getEvent(e);\n    var target = getTarget(e),\n      navIndex; // find the clicked nav item\n\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) {\n      target = target.parentNode;\n    }\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n        targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n        targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n      if (navCurrentIndex === navIndex) {\n        if (animating) {\n          stopAutoplay();\n        }\n        navClicked = -1; // reset navClicked\n      }\n    }\n  } // autoplay functions\n\n  function setAutoplayTimer() {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n    animating = true;\n  }\n  function stopAutoplayTimer() {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n  function updateAutoplayButton(action, txt) {\n    setAttrs(autoplayButton, {\n      'data-action': action\n    });\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n  function startAutoplay() {\n    setAutoplayTimer();\n    if (autoplayButton) {\n      updateAutoplayButton('stop', autoplayText[1]);\n    }\n  }\n  function stopAutoplay() {\n    stopAutoplayTimer();\n    if (autoplayButton) {\n      updateAutoplayButton('start', autoplayText[0]);\n    }\n  } // programaitcally play/pause the slider\n\n  function play() {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n  function pause() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n  function toggleAutoplay() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n  function onVisibilityChange() {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n  function mouseoverPause() {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n  function mouseoutRestart() {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  } // keydown events on document\n\n  function onDocumentKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  } // on key control\n\n  function onControlsKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) {\n          onControlsClick(e, -1);\n        }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  } // set focus\n\n  function setFocus(el) {\n    el.focus();\n  } // on key nav\n\n  function onNavKeydown(e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n    if (!hasAttr(curElement, 'data-nav')) {\n      return;\n    } // var code = e.keyCode,\n\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n      navIndex = Number(getAttr(curElement, 'data-nav'));\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) {\n          setFocus(navItems[navIndex - 1]);\n        }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) {\n          setFocus(navItems[navIndex + 1]);\n        }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n  function getEvent(e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n  function getTarget(e) {\n    return e.target || win.event.srcElement;\n  }\n  function isTouchEvent(e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n  function preventDefaultBehavior(e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n  function getMoveDirectionExpected() {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n  function onPanStart(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n    if (autoplay && animating) {\n      stopAutoplayTimer();\n    }\n    panStart = true;\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n  function onPanMove(e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      if (carousel) {\n        if (!rafIndex) {\n          rafIndex = raf(function () {\n            panUpdate(e);\n          });\n        }\n      } else {\n        if (moveDirectionExpected === '?') {\n          moveDirectionExpected = getMoveDirectionExpected();\n        }\n        if (moveDirectionExpected) {\n          preventScroll = true;\n        }\n      }\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n  function panUpdate(e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n    caf(rafIndex);\n    if (panStart) {\n      rafIndex = raf(function () {\n        panUpdate(e);\n      });\n    }\n    if (moveDirectionExpected === '?') {\n      moveDirectionExpected = getMoveDirectionExpected();\n    }\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) {\n        preventScroll = true;\n      }\n      try {\n        if (e.type) {\n          events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e));\n        }\n      } catch (err) {}\n      var x = translateInit,\n        dist = getDist(lastPosition, initPosition);\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew) : dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n  function onPanEnd(e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n      if (carousel) {\n        resetDuration(container, '');\n      }\n      panStart = false;\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {\n            'click': function preventClick(e) {\n              preventDefaultBehavior(e);\n              removeEvents(target, {\n                'click': preventClick\n              });\n            }\n          });\n        }\n        if (carousel) {\n          rafIndex = raf(function () {\n            if (horizontal && !autoWidth) {\n              var indexMoved = -dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = -(translateInit + dist);\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n                  if (moved > slidePositions[i] && dist < 0) {\n                    index += 1;\n                  }\n                  i++;\n                }\n              }\n            }\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    } // reset\n\n    if (options.preventScrollOnTouch === 'auto') {\n      preventScroll = false;\n    }\n    if (swipeAngle) {\n      moveDirectionExpected = '?';\n    }\n    if (autoplay && !animating) {\n      setAutoplayTimer();\n    }\n  } // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n\n  function updateContentWrapperHeight() {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n  function getPages() {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n\n  function updateNavVisibility() {\n    if (!nav || navAsThumbnails) {\n      return;\n    }\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n        max = pages,\n        fn = showElement;\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      } // cache pages\n\n      pagesCached = pages;\n    }\n  }\n  function info(e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {}\n    };\n  }\n  return {\n    version: '2.9.4',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function () {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};\nexports.tns = tns;","map":{"version":3,"names":["Object","defineProperty","exports","value","win$1","window","raf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","cb","setTimeout","win","caf","cancelAnimationFrame","mozCancelAnimationFrame","id","clearTimeout","extend","obj","name","copy","target","arguments","i","length","undefined","checkStorageValue","indexOf","JSON","parse","setLocalStorage","storage","key","access","setItem","e","getSlideId","tnsId","getBody","doc","document","body","createElement","fake","docElement","documentElement","setFakeBody","docOverflow","style","overflow","background","appendChild","resetFakeBody","remove","offsetHeight","calc","div","result","str","vals","val","width","offsetWidth","replace","percentageLayout","wrapper","outer","count","perPage","supported","className","innerHTML","Math","abs","getBoundingClientRect","left","children","mediaquerySupport","matchMedia","msMatchMedia","rule","position","type","styleSheet","cssText","createTextNode","getComputedStyle","currentStyle","createStyleSheet","media","nonce","setAttribute","querySelector","sheet","addCSSRule","selector","rules","index","insertRule","addRule","removeCSSRule","deleteRule","removeRule","getCssRulesLength","cssRules","toDegree","y","x","atan2","PI","getTouchDirection","angle","range","direction","gap","forEach","arr","callback","scope","l","call","classListSupport","hasClass","el","classList","contains","addClass","add","removeClass","hasAttr","attr","hasAttribute","getAttr","getAttribute","isNodeList","item","setAttrs","els","attrs","Array","prototype","toString","removeAttrs","attrLength","j","removeAttribute","arrayFromNodeList","nl","push","hideElement","forceHide","display","showElement","isVisible","whichProperty","props","Props","charAt","toUpperCase","substr","prefixes","prefix","prop","has3DTransforms","tf","has3d","cssTF","slice","toLowerCase","insertBefore","getPropertyValue","getEndProperty","propIn","propOut","endProp","test","supportsPassive","opts","get","addEventListener","passiveOption","passive","addEvents","preventScrolling","option","removeEvents","removeEventListener","Events","topics","on","eventName","fn","off","splice","emit","data","jsTransform","element","postfix","to","duration","tick","min","unit","from","Number","positionTick","moveElement","keys","object","hasOwnProperty","Element","parentNode","removeChild","tns","options","container","mode","axis","items","gutter","edgePadding","fixedWidth","autoWidth","viewportMax","slideBy","center","controls","controlsPosition","controlsText","controlsContainer","prevButton","nextButton","nav","navPosition","navContainer","navAsThumbnails","arrowKeys","speed","autoplay","autoplayPosition","autoplayTimeout","autoplayDirection","autoplayText","autoplayHoverPause","autoplayButton","autoplayButtonOutput","autoplayResetOnVisibility","animateIn","animateOut","animateNormal","animateDelay","loop","rewind","autoHeight","responsive","lazyload","lazyloadSelector","touch","mouseDrag","swipeAngle","nested","preventActionWhenRunning","preventScrollOnTouch","freezable","onInit","useLocalStorage","KEYS","ENTER","SPACE","LEFT","RIGHT","tnsStorage","localStorageAccess","browserInfo","navigator","userAgent","uid","Date","localStorage","getItem","removeItem","CALC","PERCENTAGELAYOUT","CSSMQ","TRANSFORM","HAS3DTRANSFORMS","TRANSITIONDURATION","TRANSITIONDELAY","ANIMATIONDURATION","ANIMATIONDELAY","TRANSITIONEND","ANIMATIONEND","supportConsoleWarn","console","warn","tnsList","optionsElements","nodeName","carousel","responsiveTem","updateOptions","horizontal","outerWrapper","innerWrapper","middleWrapper","containerParent","containerHTML","outerHTML","slideItems","slideCount","breakpointZone","windowWidth","getWindowWidth","isOn","setBreakpointZone","getOption","viewport","getViewportWidth","floor","fixedWidthViewportWidth","slidePositions","slideItemsOut","cloneCount","getCloneCountForLoop","slideCountNew","hasRightDeadZone","rightBoundary","getRightBoundary","updateIndexBeforeTransform","transformAttr","transformPrefix","transformPostfix","getIndexMax","ceil","max","getStartIndex","indexCached","getCurrentSlide","indexMin","indexMax","moveDirectionExpected","running","events","newContainerClasses","slideId","disable","disabled","freeze","getFreeze","frozen","controlsEvents","onControlsClick","onControlsKeydown","navEvents","onNavClick","onNavKeydown","hoverEvents","mouseoverPause","mouseoutRestart","visibilityEvent","onVisibilityChange","docmentKeydownEvent","onDocumentKeydown","touchEvents","onPanStart","onPanMove","onPanEnd","dragEvents","hasControls","hasOption","hasNav","hasAutoplay","hasTouch","hasMouseDrag","slideActiveClass","slideClonedClass","imgCompleteClass","imgEvents","onImgLoaded","onImgFailed","imgsComplete","liveregionCurrent","preventScroll","controlsContainerHTML","prevButtonHTML","nextButtonHTML","prevIsButton","nextIsButton","navContainerHTML","navItems","pages","getPages","pagesCached","navClicked","navCurrentIndex","getCurrentNavIndex","navCurrentIndexCached","navActiveClass","navStr","navStrCurrent","autoplayButtonHTML","autoplayHtmlStrings","autoplayTimer","animating","autoplayHoverPaused","autoplayUserPaused","autoplayVisibilityPaused","initPosition","lastPosition","translateInit","panStart","rafIndex","getDist","a","b","resetVariblesWhenDisable","initStructure","initSheet","initSliderTransform","condition","tem","ind","getAbsIndex","absIndex","getItemsMax","bp","apply","itemsMax","innerWidth","clientWidth","getInsertPosition","pos","getClientWidth","rect","right","ww","parseInt","getSlideMarginLeft","getInnerWrapperStyles","edgePaddingTem","gutterTem","fixedWidthTem","speedTem","autoHeightBP","gutterTemUnit","dir","getTransitionDurationStyle","getContainerWidth","itemsTem","getSlideWidthStyle","dividend","getSlideGutterStyle","getCSSPrefix","num","substring","getAnimationDurationStyle","classOuter","classInner","wp","fragmentBefore","createDocumentFragment","fragmentAfter","cloneFirst","cloneNode","firstChild","cloneLast","imgs","querySelectorAll","img","src","imgLoaded","imgsLoadedCheck","getImageArray","initSliderTransformStyleCheck","doContainerTransformSilent","initTools","initEvents","stylesApplicationCheck","initSliderTransformCore","setSlidePositions","updateContentWrapperHeight","fontSize","slide","marginLeft","update_carousel_transition_duration","middleWrapperStr","innerWrapperStr","containerStr","slideStr","itemsBP","fixedWidthBP","speedBP","edgePaddingBP","gutterBP","updateSlideStatus","insertAdjacentHTML","getLiveRegionStr","txt","toggleAutoplay","startAutoplay","navHtml","hiddenStr","updateNavVisibility","isButton","updateControlsStatus","disableUI","eve","onTransitionEnd","resizeTasks","info","onResize","doAutoHeight","doLazyLoad","disableSlider","freezeSlider","additionalUpdates","destroy","ownerNode","clearInterval","htmlList","prevEl","previousElementSibling","parentEl","nextElementSibling","firstElementChild","getEvent","bpChanged","breakpointZoneTem","needContainerTransform","indChanged","itemsChanged","disableTem","freezeTem","arrowKeysTem","controlsTem","navTem","touchTem","mouseDragTem","autoplayTem","autoplayHoverPauseTem","autoplayResetOnVisibilityTem","indexTem","autoHeightTem","controlsTextTem","centerTem","autoplayTextTem","updateIndex","enableSlider","doContainerTransform","getContainerTransformValue","unfreezeSlider","stopAutoplay","height","html","len","updateLiveRegion","updateGallerySlidePositions","vp","leftEdge","rightEdge","enableUI","margin","classN","getVisibleSlideRange","start","end","rangestart","rangeend","parseFloat","point","cell","arg","stopPropagation","srcset","getTarget","imgFailed","imgCompleted","imgSelector","updateInnerWrapperHeight","complete","updateNavStatus","getMaxSlideHeight","slideStart","slideRange","heights","maxHeight","attr2","base","navPrev","navCurrent","getLowerCaseNodeName","isAriaDisabled","disEnableElement","prevDisabled","nextDisabled","disablePrev","disableNext","resetDuration","getSliderWidth","getCenterGap","denominator","animateSlide","number","classOut","classIn","isOut","transformCore","render","sliderMoved","strTrans","event","propertyName","goTo","targetIndex","indexGap","isNaN","factor","passEventObject","targetIn","navIndex","targetIndexBase","setAutoplayTimer","setInterval","stopAutoplayTimer","updateAutoplayButton","action","play","pause","hidden","keyIndex","keyCode","setFocus","focus","curElement","activeElement","isTouchEvent","changedTouches","srcElement","preventDefaultBehavior","preventDefault","returnValue","getMoveDirectionExpected","$","clientX","clientY","panUpdate","cancelable","err","dist","percentageX","preventClick","indexMoved","moved","rough","displayIndex","version","getInfo","updateSliderHeight","refresh","rebuild"],"sources":["C:/Users/Barbosa/Desktop/Pastas/Portiflio/portifolio/node_modules/tiny-slider/dist/tiny-slider.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar win$1 = window;\nvar raf = win$1.requestAnimationFrame || win$1.webkitRequestAnimationFrame || win$1.mozRequestAnimationFrame || win$1.msRequestAnimationFrame || function (cb) {\n  return setTimeout(cb, 16);\n};\n\nvar win = window;\nvar caf = win.cancelAnimationFrame || win.mozCancelAnimationFrame || function (id) {\n  clearTimeout(id);\n};\n\nfunction extend() {\n  var obj,\n      name,\n      copy,\n      target = arguments[0] || {},\n      i = 1,\n      length = arguments.length;\n\n  for (; i < length; i++) {\n    if ((obj = arguments[i]) !== null) {\n      for (name in obj) {\n        copy = obj[name];\n\n        if (target === copy) {\n          continue;\n        } else if (copy !== undefined) {\n          target[name] = copy;\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nfunction checkStorageValue(value) {\n  return ['true', 'false'].indexOf(value) >= 0 ? JSON.parse(value) : value;\n}\n\nfunction setLocalStorage(storage, key, value, access) {\n  if (access) {\n    try {\n      storage.setItem(key, value);\n    } catch (e) {}\n  }\n\n  return value;\n}\n\nfunction getSlideId() {\n  var id = window.tnsId;\n  window.tnsId = !id ? 1 : id + 1;\n  return 'tns' + window.tnsId;\n}\n\nfunction getBody() {\n  var doc = document,\n      body = doc.body;\n\n  if (!body) {\n    body = doc.createElement('body');\n    body.fake = true;\n  }\n\n  return body;\n}\n\nvar docElement = document.documentElement;\n\nfunction setFakeBody(body) {\n  var docOverflow = '';\n\n  if (body.fake) {\n    docOverflow = docElement.style.overflow; //avoid crashing IE8, if background image is used\n\n    body.style.background = ''; //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n\n    body.style.overflow = docElement.style.overflow = 'hidden';\n    docElement.appendChild(body);\n  }\n\n  return docOverflow;\n}\n\nfunction resetFakeBody(body, docOverflow) {\n  if (body.fake) {\n    body.remove();\n    docElement.style.overflow = docOverflow; // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n    // eslint-disable-next-line\n\n    docElement.offsetHeight;\n  }\n}\n\n// get css-calc \nfunction calc() {\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      div = doc.createElement('div'),\n      result = false;\n  body.appendChild(div);\n\n  try {\n    var str = '(10px * 10)',\n        vals = ['calc' + str, '-moz-calc' + str, '-webkit-calc' + str],\n        val;\n\n    for (var i = 0; i < 3; i++) {\n      val = vals[i];\n      div.style.width = val;\n\n      if (div.offsetWidth === 100) {\n        result = val.replace(str, '');\n        break;\n      }\n    }\n  } catch (e) {}\n\n  body.fake ? resetFakeBody(body, docOverflow) : div.remove();\n  return result;\n}\n\n// get subpixel support value\nfunction percentageLayout() {\n  // check subpixel layout supporting\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      wrapper = doc.createElement('div'),\n      outer = doc.createElement('div'),\n      str = '',\n      count = 70,\n      perPage = 3,\n      supported = false;\n  wrapper.className = \"tns-t-subp2\";\n  outer.className = \"tns-t-ct\";\n\n  for (var i = 0; i < count; i++) {\n    str += '<div></div>';\n  }\n\n  outer.innerHTML = str;\n  wrapper.appendChild(outer);\n  body.appendChild(wrapper);\n  supported = Math.abs(wrapper.getBoundingClientRect().left - outer.children[count - perPage].getBoundingClientRect().left) < 2;\n  body.fake ? resetFakeBody(body, docOverflow) : wrapper.remove();\n  return supported;\n}\n\nfunction mediaquerySupport() {\n  if (window.matchMedia || window.msMatchMedia) {\n    return true;\n  }\n\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      div = doc.createElement('div'),\n      style = doc.createElement('style'),\n      rule = '@media all and (min-width:1px){.tns-mq-test{position:absolute}}',\n      position;\n  style.type = 'text/css';\n  div.className = 'tns-mq-test';\n  body.appendChild(style);\n  body.appendChild(div);\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = rule;\n  } else {\n    style.appendChild(doc.createTextNode(rule));\n  }\n\n  position = window.getComputedStyle ? window.getComputedStyle(div).position : div.currentStyle['position'];\n  body.fake ? resetFakeBody(body, docOverflow) : div.remove();\n  return position === \"absolute\";\n}\n\n// create and append style sheet\nfunction createStyleSheet(media, nonce) {\n  // Create the <style> tag\n  var style = document.createElement(\"style\"); // style.setAttribute(\"type\", \"text/css\");\n  // Add a media (and/or media query) here if you'd like!\n  // style.setAttribute(\"media\", \"screen\")\n  // style.setAttribute(\"media\", \"only screen and (max-width : 1024px)\")\n\n  if (media) {\n    style.setAttribute(\"media\", media);\n  } // Add nonce attribute for Content Security Policy\n\n\n  if (nonce) {\n    style.setAttribute(\"nonce\", nonce);\n  } // WebKit hack :(\n  // style.appendChild(document.createTextNode(\"\"));\n  // Add the <style> element to the page\n\n\n  document.querySelector('head').appendChild(style);\n  return style.sheet ? style.sheet : style.styleSheet;\n}\n\n// cross browsers addRule method\nfunction addCSSRule(sheet, selector, rules, index) {\n  // return raf(function() {\n  'insertRule' in sheet ? sheet.insertRule(selector + '{' + rules + '}', index) : sheet.addRule(selector, rules, index); // });\n}\n\n// cross browsers addRule method\nfunction removeCSSRule(sheet, index) {\n  // return raf(function() {\n  'deleteRule' in sheet ? sheet.deleteRule(index) : sheet.removeRule(index); // });\n}\n\nfunction getCssRulesLength(sheet) {\n  var rule = 'insertRule' in sheet ? sheet.cssRules : sheet.rules;\n  return rule.length;\n}\n\nfunction toDegree(y, x) {\n  return Math.atan2(y, x) * (180 / Math.PI);\n}\n\nfunction getTouchDirection(angle, range) {\n  var direction = false,\n      gap = Math.abs(90 - Math.abs(angle));\n\n  if (gap >= 90 - range) {\n    direction = 'horizontal';\n  } else if (gap <= range) {\n    direction = 'vertical';\n  }\n\n  return direction;\n}\n\n// https://toddmotto.com/ditch-the-array-foreach-call-nodelist-hack/\nfunction forEach(arr, callback, scope) {\n  for (var i = 0, l = arr.length; i < l; i++) {\n    callback.call(scope, arr[i], i);\n  }\n}\n\nvar classListSupport = ('classList' in document.createElement('_'));\n\nvar hasClass = classListSupport ? function (el, str) {\n  return el.classList.contains(str);\n} : function (el, str) {\n  return el.className.indexOf(str) >= 0;\n};\n\nvar addClass = classListSupport ? function (el, str) {\n  if (!hasClass(el, str)) {\n    el.classList.add(str);\n  }\n} : function (el, str) {\n  if (!hasClass(el, str)) {\n    el.className += ' ' + str;\n  }\n};\n\nvar removeClass = classListSupport ? function (el, str) {\n  if (hasClass(el, str)) {\n    el.classList.remove(str);\n  }\n} : function (el, str) {\n  if (hasClass(el, str)) {\n    el.className = el.className.replace(str, '');\n  }\n};\n\nfunction hasAttr(el, attr) {\n  return el.hasAttribute(attr);\n}\n\nfunction getAttr(el, attr) {\n  return el.getAttribute(attr);\n}\n\nfunction isNodeList(el) {\n  // Only NodeList has the \"item()\" function\n  return typeof el.item !== \"undefined\";\n}\n\nfunction setAttrs(els, attrs) {\n  els = isNodeList(els) || els instanceof Array ? els : [els];\n\n  if (Object.prototype.toString.call(attrs) !== '[object Object]') {\n    return;\n  }\n\n  for (var i = els.length; i--;) {\n    for (var key in attrs) {\n      els[i].setAttribute(key, attrs[key]);\n    }\n  }\n}\n\nfunction removeAttrs(els, attrs) {\n  els = isNodeList(els) || els instanceof Array ? els : [els];\n  attrs = attrs instanceof Array ? attrs : [attrs];\n  var attrLength = attrs.length;\n\n  for (var i = els.length; i--;) {\n    for (var j = attrLength; j--;) {\n      els[i].removeAttribute(attrs[j]);\n    }\n  }\n}\n\nfunction arrayFromNodeList(nl) {\n  var arr = [];\n\n  for (var i = 0, l = nl.length; i < l; i++) {\n    arr.push(nl[i]);\n  }\n\n  return arr;\n}\n\nfunction hideElement(el, forceHide) {\n  if (el.style.display !== 'none') {\n    el.style.display = 'none';\n  }\n}\n\nfunction showElement(el, forceHide) {\n  if (el.style.display === 'none') {\n    el.style.display = '';\n  }\n}\n\nfunction isVisible(el) {\n  return window.getComputedStyle(el).display !== 'none';\n}\n\nfunction whichProperty(props) {\n  if (typeof props === 'string') {\n    var arr = [props],\n        Props = props.charAt(0).toUpperCase() + props.substr(1),\n        prefixes = ['Webkit', 'Moz', 'ms', 'O'];\n    prefixes.forEach(function (prefix) {\n      if (prefix !== 'ms' || props === 'transform') {\n        arr.push(prefix + Props);\n      }\n    });\n    props = arr;\n  }\n\n  var el = document.createElement('fakeelement');\n      props.length;\n\n  for (var i = 0; i < props.length; i++) {\n    var prop = props[i];\n\n    if (el.style[prop] !== undefined) {\n      return prop;\n    }\n  }\n\n  return false; // explicit for ie9-\n}\n\nfunction has3DTransforms(tf) {\n  if (!tf) {\n    return false;\n  }\n\n  if (!window.getComputedStyle) {\n    return false;\n  }\n\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      el = doc.createElement('p'),\n      has3d,\n      cssTF = tf.length > 9 ? '-' + tf.slice(0, -9).toLowerCase() + '-' : '';\n  cssTF += 'transform'; // Add it to the body to get the computed style\n\n  body.insertBefore(el, null);\n  el.style[tf] = 'translate3d(1px,1px,1px)';\n  has3d = window.getComputedStyle(el).getPropertyValue(cssTF);\n  body.fake ? resetFakeBody(body, docOverflow) : el.remove();\n  return has3d !== undefined && has3d.length > 0 && has3d !== \"none\";\n}\n\n// get transitionend, animationend based on transitionDuration\n// @propin: string\n// @propOut: string, first-letter uppercase\n// Usage: getEndProperty('WebkitTransitionDuration', 'Transition') => webkitTransitionEnd\nfunction getEndProperty(propIn, propOut) {\n  var endProp = false;\n\n  if (/^Webkit/.test(propIn)) {\n    endProp = 'webkit' + propOut + 'End';\n  } else if (/^O/.test(propIn)) {\n    endProp = 'o' + propOut + 'End';\n  } else if (propIn) {\n    endProp = propOut.toLowerCase() + 'end';\n  }\n\n  return endProp;\n}\n\n// Test via a getter in the options object to see if the passive property is accessed\nvar supportsPassive = false;\n\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function () {\n      supportsPassive = true;\n    }\n  });\n  window.addEventListener(\"test\", null, opts);\n} catch (e) {}\n\nvar passiveOption = supportsPassive ? {\n  passive: true\n} : false;\n\nfunction addEvents(el, obj, preventScrolling) {\n  for (var prop in obj) {\n    var option = ['touchstart', 'touchmove'].indexOf(prop) >= 0 && !preventScrolling ? passiveOption : false;\n    el.addEventListener(prop, obj[prop], option);\n  }\n}\n\nfunction removeEvents(el, obj) {\n  for (var prop in obj) {\n    var option = ['touchstart', 'touchmove'].indexOf(prop) >= 0 ? passiveOption : false;\n    el.removeEventListener(prop, obj[prop], option);\n  }\n}\n\nfunction Events() {\n  return {\n    topics: {},\n    on: function (eventName, fn) {\n      this.topics[eventName] = this.topics[eventName] || [];\n      this.topics[eventName].push(fn);\n    },\n    off: function (eventName, fn) {\n      if (this.topics[eventName]) {\n        for (var i = 0; i < this.topics[eventName].length; i++) {\n          if (this.topics[eventName][i] === fn) {\n            this.topics[eventName].splice(i, 1);\n            break;\n          }\n        }\n      }\n    },\n    emit: function (eventName, data) {\n      data.type = eventName;\n\n      if (this.topics[eventName]) {\n        this.topics[eventName].forEach(function (fn) {\n          fn(data, eventName);\n        });\n      }\n    }\n  };\n}\n\nfunction jsTransform(element, attr, prefix, postfix, to, duration, callback) {\n  var tick = Math.min(duration, 10),\n      unit = to.indexOf('%') >= 0 ? '%' : 'px',\n      to = to.replace(unit, ''),\n      from = Number(element.style[attr].replace(prefix, '').replace(postfix, '').replace(unit, '')),\n      positionTick = (to - from) / duration * tick;\n  setTimeout(moveElement, tick);\n\n  function moveElement() {\n    duration -= tick;\n    from += positionTick;\n    element.style[attr] = prefix + from + unit + postfix;\n\n    if (duration > 0) {\n      setTimeout(moveElement, tick);\n    } else {\n      callback();\n    }\n  }\n}\n\n// Object.keys\nif (!Object.keys) {\n  Object.keys = function (object) {\n    var keys = [];\n\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n\n    return keys;\n  };\n} // ChildNode.remove\n\n\nif (!(\"remove\" in Element.prototype)) {\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\nvar tns = function (options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n  var doc = document,\n      win = window,\n      KEYS = {\n    ENTER: 13,\n    SPACE: 32,\n    LEFT: 37,\n    RIGHT: 39\n  },\n      tnsStorage = {},\n      localStorageAccess = options.useLocalStorage;\n\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date();\n\n    try {\n      tnsStorage = win.localStorage;\n\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n\n      if (!localStorageAccess) {\n        tnsStorage = {};\n      }\n    } catch (e) {\n      localStorageAccess = false;\n    }\n\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function (item) {\n          tnsStorage.removeItem(item);\n        });\n      } // update browserInfo\n\n\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n      PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n      CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n      TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n      HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n      TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n      TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n      ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n      ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n      TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n      ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess); // get element nodes from selectors\n\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n      tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n      optionsElements = {};\n  tnsList.forEach(function (item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n          el = doc.querySelector(str);\n      optionsElements[item] = str;\n\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) {\n          console.warn('Can\\'t find', options[item]);\n        }\n\n        return;\n      }\n    }\n  }); // make sure at least 1 slide\n\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) {\n      console.warn('No slides found in', options.container);\n    }\n\n    return;\n  } // update options\n\n\n  var responsive = options.responsive,\n      nested = options.nested,\n      carousel = options.mode === 'carousel' ? true : false;\n\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n\n    var responsiveTem = {};\n\n    for (var key in responsive) {\n      var val = responsive[key]; // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n\n      val = typeof val === 'number' ? {\n        items: val\n      } : val;\n      responsiveTem[key] = val;\n    }\n\n    responsive = responsiveTem;\n    responsiveTem = null;\n  } // update options\n\n\n  function updateOptions(obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') {\n          obj[key] = 'page';\n        }\n\n        if (key === 'edgePadding') {\n          obj[key] = false;\n        }\n\n        if (key === 'autoHeight') {\n          obj[key] = false;\n        }\n      } // update responsive options\n\n\n      if (key === 'responsive') {\n        updateOptions(obj[key]);\n      }\n    }\n  }\n\n  if (!carousel) {\n    updateOptions(options);\n  } // === define and set variables ===\n\n\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n    var animateIn = options.animateIn,\n        animateOut = options.animateOut,\n        animateDelay = options.animateDelay,\n        animateNormal = options.animateNormal;\n  }\n\n  var horizontal = options.axis === 'horizontal' ? true : false,\n      outerWrapper = doc.createElement('div'),\n      innerWrapper = doc.createElement('div'),\n      middleWrapper,\n      container = options.container,\n      containerParent = container.parentNode,\n      containerHTML = container.outerHTML,\n      slideItems = container.children,\n      slideCount = slideItems.length,\n      breakpointZone,\n      windowWidth = getWindowWidth(),\n      isOn = false;\n\n  if (responsive) {\n    setBreakpointZone();\n  }\n\n  if (carousel) {\n    container.className += ' tns-vpfix';\n  } // fixedWidth: viewport > rightBoundary > indexMax\n\n\n  var autoWidth = options.autoWidth,\n      fixedWidth = getOption('fixedWidth'),\n      edgePadding = getOption('edgePadding'),\n      gutter = getOption('gutter'),\n      viewport = getViewportWidth(),\n      center = getOption('center'),\n      items = !autoWidth ? Math.floor(getOption('items')) : 1,\n      slideBy = getOption('slideBy'),\n      viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n      arrowKeys = getOption('arrowKeys'),\n      speed = getOption('speed'),\n      rewind = options.rewind,\n      loop = rewind ? false : options.loop,\n      autoHeight = getOption('autoHeight'),\n      controls = getOption('controls'),\n      controlsText = getOption('controlsText'),\n      nav = getOption('nav'),\n      touch = getOption('touch'),\n      mouseDrag = getOption('mouseDrag'),\n      autoplay = getOption('autoplay'),\n      autoplayTimeout = getOption('autoplayTimeout'),\n      autoplayText = getOption('autoplayText'),\n      autoplayHoverPause = getOption('autoplayHoverPause'),\n      autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n      sheet = createStyleSheet(null, getOption('nonce')),\n      lazyload = options.lazyload,\n      lazyloadSelector = options.lazyloadSelector,\n      slidePositions,\n      // collection of slide positions\n  slideItemsOut = [],\n      cloneCount = loop ? getCloneCountForLoop() : 0,\n      slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n      hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n      rightBoundary = fixedWidth ? getRightBoundary() : null,\n      updateIndexBeforeTransform = !carousel || !loop ? true : false,\n      // transform\n  transformAttr = horizontal ? 'left' : 'top',\n      transformPrefix = '',\n      transformPostfix = '',\n      // index\n  getIndexMax = function () {\n    if (fixedWidth) {\n      return function () {\n        return center && !loop ? slideCount - 1 : Math.ceil(-rightBoundary / (fixedWidth + gutter));\n      };\n    } else if (autoWidth) {\n      return function () {\n        for (var i = 0; i < slideCountNew; i++) {\n          if (slidePositions[i] >= -rightBoundary) {\n            return i;\n          }\n        }\n      };\n    } else {\n      return function () {\n        if (center && carousel && !loop) {\n          return slideCount - 1;\n        } else {\n          return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n        }\n      };\n    }\n  }(),\n      index = getStartIndex(getOption('startIndex')),\n      indexCached = index;\n      getCurrentSlide();\n      var indexMin = 0,\n      indexMax = !autoWidth ? getIndexMax() : null,\n      preventActionWhenRunning = options.preventActionWhenRunning,\n      swipeAngle = options.swipeAngle,\n      moveDirectionExpected = swipeAngle ? '?' : true,\n      running = false,\n      onInit = options.onInit,\n      events = new Events(),\n      // id, class\n  newContainerClasses = ' tns-slider tns-' + options.mode,\n      slideId = container.id || getSlideId(),\n      disable = getOption('disable'),\n      disabled = false,\n      freezable = options.freezable,\n      freeze = freezable && !autoWidth ? getFreeze() : false,\n      frozen = false,\n      controlsEvents = {\n    'click': onControlsClick,\n    'keydown': onControlsKeydown\n  },\n      navEvents = {\n    'click': onNavClick,\n    'keydown': onNavKeydown\n  },\n      hoverEvents = {\n    'mouseover': mouseoverPause,\n    'mouseout': mouseoutRestart\n  },\n      visibilityEvent = {\n    'visibilitychange': onVisibilityChange\n  },\n      docmentKeydownEvent = {\n    'keydown': onDocumentKeydown\n  },\n      touchEvents = {\n    'touchstart': onPanStart,\n    'touchmove': onPanMove,\n    'touchend': onPanEnd,\n    'touchcancel': onPanEnd\n  },\n      dragEvents = {\n    'mousedown': onPanStart,\n    'mousemove': onPanMove,\n    'mouseup': onPanEnd,\n    'mouseleave': onPanEnd\n  },\n      hasControls = hasOption('controls'),\n      hasNav = hasOption('nav'),\n      navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n      hasAutoplay = hasOption('autoplay'),\n      hasTouch = hasOption('touch'),\n      hasMouseDrag = hasOption('mouseDrag'),\n      slideActiveClass = 'tns-slide-active',\n      slideClonedClass = 'tns-slide-cloned',\n      imgCompleteClass = 'tns-complete',\n      imgEvents = {\n    'load': onImgLoaded,\n    'error': onImgFailed\n  },\n      imgsComplete,\n      liveregionCurrent,\n      preventScroll = options.preventScrollOnTouch === 'force' ? true : false; // controls\n\n\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n        controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n        prevButton = options.prevButton,\n        nextButton = options.nextButton,\n        prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n        nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n        prevIsButton,\n        nextIsButton;\n  } // nav\n\n\n  if (hasNav) {\n    var navContainer = options.navContainer,\n        navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n        navItems,\n        pages = autoWidth ? slideCount : getPages(),\n        pagesCached = 0,\n        navClicked = -1,\n        navCurrentIndex = getCurrentNavIndex(),\n        navCurrentIndexCached = navCurrentIndex,\n        navActiveClass = 'tns-nav-active',\n        navStr = 'Carousel Page ',\n        navStrCurrent = ' (Current Slide)';\n  } // autoplay\n\n\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n        autoplayButton = options.autoplayButton,\n        autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n        autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n        autoplayTimer,\n        animating,\n        autoplayHoverPaused,\n        autoplayUserPaused,\n        autoplayVisibilityPaused;\n  }\n\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n        lastPosition = {},\n        translateInit,\n        panStart = false,\n        rafIndex,\n        getDist = horizontal ? function (a, b) {\n      return a.x - b.x;\n    } : function (a, b) {\n      return a.y - b.y;\n    };\n  } // disable slider when slidecount <= items\n\n\n  if (!autoWidth) {\n    resetVariblesWhenDisable(disable || freeze);\n  }\n\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n  }\n\n  if (carousel) {\n    container.className = container.className.replace('tns-vpfix', '');\n  }\n\n  initStructure();\n  initSheet();\n  initSliderTransform(); // === COMMON FUNCTIONS === //\n\n  function resetVariblesWhenDisable(condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n\n  function getCurrentSlide() {\n    var tem = carousel ? index - cloneCount : index;\n\n    while (tem < 0) {\n      tem += slideCount;\n    }\n\n    return tem % slideCount + 1;\n  }\n\n  function getStartIndex(ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n\n  function getAbsIndex(i) {\n    if (i == null) {\n      i = index;\n    }\n\n    if (carousel) {\n      i -= cloneCount;\n    }\n\n    while (i < 0) {\n      i += slideCount;\n    }\n\n    return Math.floor(i % slideCount);\n  }\n\n  function getCurrentNavIndex() {\n    var absIndex = getAbsIndex(),\n        result;\n    result = navAsThumbnails ? absIndex : fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) : Math.floor(absIndex / items); // set active nav to the last one when reaches the right edge\n\n    if (!loop && carousel && index === indexMax) {\n      result = pages - 1;\n    }\n\n    return result;\n  }\n\n  function getItemsMax() {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || fixedWidth && !viewportMax) {\n      return slideCount - 1; // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n          arr = [];\n\n      if (fixedWidth || options[str] < slideCount) {\n        arr.push(options[str]);\n      }\n\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n\n          if (tem && (fixedWidth || tem < slideCount)) {\n            arr.push(tem);\n          }\n        }\n      }\n\n      if (!arr.length) {\n        arr.push(0);\n      }\n\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n\n  function getCloneCountForLoop() {\n    var itemsMax = getItemsMax(),\n        result = carousel ? Math.ceil((itemsMax * 5 - slideCount) / 2) : itemsMax * 4 - slideCount;\n    result = Math.max(itemsMax, result);\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n\n  function getWindowWidth() {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n\n  function getInsertPosition(pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n\n  function getClientWidth(el) {\n    if (el == null) {\n      return;\n    }\n\n    var div = doc.createElement('div'),\n        rect,\n        width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n\n  function getViewportWidth() {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n\n  function hasOption(item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  } // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n\n\n  function getOption(item, ww) {\n    if (ww == null) {\n      ww = windowWidth;\n    }\n\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n    } else {\n      var result = options[item];\n\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) {\n              result = responsive[bp][item];\n            }\n          }\n        }\n      }\n\n      if (item === 'slideBy' && result === 'page') {\n        result = getOption('items');\n      }\n\n      if (!carousel && (item === 'slideBy' || item === 'items')) {\n        result = Math.floor(result);\n      }\n\n      return result;\n    }\n  }\n\n  function getSlideMarginLeft(i) {\n    return CALC ? CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' : i * 100 / slideCountNew + '%';\n  }\n\n  function getInnerWrapperStyles(edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n\n      if (gutterTem) {\n        gap -= gutterTem;\n      }\n\n      str = horizontal ? 'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' : 'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n          dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';';\n    }\n\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) {\n      str += getTransitionDurationStyle(speedTem);\n    }\n\n    return str;\n  }\n\n  function getContainerWidth(fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ? CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' : slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n\n  function getSlideWidthStyle(fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n\n    if (fixedWidthTem) {\n      width = fixedWidthTem + gutterTem + 'px';\n    } else {\n      if (!carousel) {\n        itemsTem = Math.floor(itemsTem);\n      }\n\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ? CALC + '(100% / ' + dividend + ')' : 100 / dividend + '%';\n    }\n\n    width = 'width:' + width; // inner slider: overwrite outer slider styles\n\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n\n  function getSlideGutterStyle(gutterTem) {\n    var str = ''; // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n          dir = horizontal ? 'right' : 'bottom';\n      str = prop + dir + ': ' + gutterTem + 'px;';\n    }\n\n    return str;\n  }\n\n  function getCSSPrefix(name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n\n    if (prefix) {\n      prefix = '-' + prefix + '-';\n    }\n\n    return prefix;\n  }\n\n  function getTransitionDurationStyle(speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n\n  function getAnimationDurationStyle(speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n\n  function initStructure() {\n    var classOuter = 'tns-outer',\n        classInner = 'tns-inner';\n        hasOption('gutter');\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw'; // set container properties\n\n    if (container.id === '') {\n      container.id = slideId;\n    }\n\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n\n    if (autoWidth) {\n      newContainerClasses += ' tns-autowidth';\n    }\n\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses; // add constrain layer for carousel\n\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container); // add id, class, aria attributes\n    // before clone slides\n\n    forEach(slideItems, function (item, i) {\n      addClass(item, 'tns-item');\n\n      if (!item.id) {\n        item.id = slideId + '-item' + i;\n      }\n\n      if (!carousel && animateNormal) {\n        addClass(item, animateNormal);\n      }\n\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    }); // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n          fragmentAfter = doc.createDocumentFragment();\n\n      for (var j = cloneCount; j--;) {\n        var num = j % slideCount,\n            cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n  }\n\n  function initSliderTransform() {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img'); // add img load event listener\n\n      forEach(imgs, function (img) {\n        var src = img.src;\n\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n            img.src = src; // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      }); // set imgsComplete\n\n      raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), function () {\n          imgsComplete = true;\n        });\n      }); // reset imgs for auto height: check visible imgs only\n\n      if (hasOption('autoHeight')) {\n        imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1));\n      }\n\n      lazyload ? initSliderTransformStyleCheck() : raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck);\n      });\n    } else {\n      // set container transform property\n      if (carousel) {\n        doContainerTransformSilent();\n      } // update slider tools and events\n\n\n      initTools();\n      initEvents();\n    }\n  }\n\n  function initSliderTransformStyleCheck() {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n        Math.abs(left - right) <= 1 ? initSliderTransformCore() : setTimeout(function () {\n          stylesApplicationCheck();\n        }, 16);\n      })();\n    } else {\n      initSliderTransformCore();\n    }\n  }\n\n  function initSliderTransformCore() {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n\n        if (freezable) {\n          freeze = getFreeze();\n        }\n\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    } // set container transform property\n\n\n    if (carousel) {\n      doContainerTransformSilent();\n    } // update slider tools and events\n\n\n    initTools();\n    initEvents();\n  }\n\n  function initSheet() {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // #### LAYOUT\n    // ## INLINE-BLOCK VS FLOAT\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n\n\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    } // ## BASIC STYLES\n\n\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      } // inner wrapper styles\n\n\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet)); // container styles\n\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      } // slide styles\n\n\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n\n      if (options.gutter) {\n        str += getSlideGutterStyle(options.gutter);\n      } // set gallery items transition-duration\n\n\n      if (!carousel) {\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n\n        if (ANIMATIONDURATION) {\n          str += getAnimationDurationStyle(speed);\n        }\n      }\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      } // non CSS mediaqueries: IE8\n      // ## update inner wrapper, container, slides if needed\n      // set inline styles for inner wrapper & container\n      // insert stylesheet (one line) for slides only (since slides are many)\n\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration(); // inner wrapper styles\n\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight); // container styles\n\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      } // slide styles\n\n\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n\n      if (gutter) {\n        str += getSlideGutterStyle(gutter);\n      } // append to the last line\n\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      }\n    } // ## MEDIAQUERIES\n\n\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n        var opts = responsive[bp],\n            str = '',\n            middleWrapperStr = '',\n            innerWrapperStr = '',\n            containerStr = '',\n            slideStr = '',\n            itemsBP = !autoWidth ? getOption('items', bp) : null,\n            fixedWidthBP = getOption('fixedWidth', bp),\n            speedBP = getOption('speed', bp),\n            edgePaddingBP = getOption('edgePadding', bp),\n            autoHeightBP = getOption('autoHeight', bp),\n            gutterBP = getOption('gutter', bp); // middle wrapper string\n\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        } // inner wrapper string\n\n\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        } // container string\n\n\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || fixedWidth && 'gutter' in opts)) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        } // slide string\n\n\n        if ('fixedWidth' in opts || fixedWidth && 'gutter' in opts || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        } // set gallery items transition-duration\n\n\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) {\n            slideStr += getTransitionDurationStyle(speedBP);\n          }\n\n          if (ANIMATIONDURATION) {\n            slideStr += getAnimationDurationStyle(speedBP);\n          }\n        }\n\n        if (slideStr) {\n          slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}';\n        } // add up\n\n\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n\n  function initTools() {\n    // == slides ==\n    updateSlideStatus(); // == live region ==\n\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current'); // == autoplayInit ==\n\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {\n          'data-action': txt\n        });\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      } // add event\n\n\n      if (autoplayButton) {\n        addEvents(autoplayButton, {\n          'click': toggleAutoplay\n        });\n      }\n\n      if (autoplay) {\n        startAutoplay();\n\n        if (autoplayHoverPause) {\n          addEvents(container, hoverEvents);\n        }\n\n        if (autoplayResetOnVisibility) {\n          addEvents(container, visibilityEvent);\n        }\n      }\n    } // == navInit ==\n\n\n    if (hasNav) {\n      // will not hide the navs in case they're thumbnails\n\n      if (navContainer) {\n        setAttrs(navContainer, {\n          'aria-label': 'Carousel Pagination'\n        });\n        navItems = navContainer.children;\n        forEach(navItems, function (item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId\n          });\n        }); // generated nav\n      } else {\n        var navHtml = '',\n            hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i + '\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) + '\"></button>';\n        }\n\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n\n      updateNavVisibility(); // add transition\n\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n            str = 'transition: all ' + speed / 1000 + 's';\n\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n\n      setAttrs(navItems[navCurrentIndex], {\n        'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n      });\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass); // add events\n\n      addEvents(navContainer, navEvents);\n    } // == controlsInit ==\n\n\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[1] + '</button></div>');\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1'\n        });\n      }\n\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs(prevButton, {\n          'data-controls': 'prev'\n        });\n        setAttrs(nextButton, {\n          'data-controls': 'next'\n        });\n      }\n\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n      updateControlsStatus(); // add events\n\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    } // hide tools if needed\n\n\n    disableUI();\n  }\n\n  function initEvents() {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n\n    if (touch) {\n      addEvents(container, touchEvents, options.preventScrollOnTouch);\n    }\n\n    if (mouseDrag) {\n      addEvents(container, dragEvents);\n    }\n\n    if (arrowKeys) {\n      addEvents(doc, docmentKeydownEvent);\n    }\n\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {\n        'resize': onResize\n      });\n    }\n\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) {\n        doAutoHeight();\n      }\n    }\n\n    doLazyLoad();\n\n    if (disable) {\n      disableSlider();\n    } else if (freeze) {\n      freezeSlider();\n    }\n\n    events.on('indexChanged', additionalUpdates);\n\n    if (nested === 'inner') {\n      events.emit('innerLoaded', info());\n    }\n\n    if (typeof onInit === 'function') {\n      onInit(info());\n    }\n\n    isOn = true;\n  }\n\n  function destroy() {\n    // sheet\n    sheet.disabled = true;\n\n    if (sheet.ownerNode) {\n      sheet.ownerNode.remove();\n    } // remove win event listeners\n\n\n    removeEvents(win, {\n      'resize': onResize\n    }); // arrowKeys, controls, nav\n\n    if (arrowKeys) {\n      removeEvents(doc, docmentKeydownEvent);\n    }\n\n    if (controlsContainer) {\n      removeEvents(controlsContainer, controlsEvents);\n    }\n\n    if (navContainer) {\n      removeEvents(navContainer, navEvents);\n    } // autoplay\n\n\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n\n    if (autoplayButton) {\n      removeEvents(autoplayButton, {\n        'click': toggleAutoplay\n      });\n    }\n\n    if (autoplay) {\n      clearInterval(autoplayTimer);\n    } // container\n\n\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n\n    if (touch) {\n      removeEvents(container, touchEvents);\n    }\n\n    if (mouseDrag) {\n      removeEvents(container, dragEvents);\n    } // cache Object values in options && reset HTML\n\n\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n    tnsList.forEach(function (item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n            parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    }); // reset variables\n\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = panStart = rafIndex = getDist = touch = mouseDrag = null; // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') {\n        this[a] = null;\n      }\n    }\n\n    isOn = false;\n  } // === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n\n\n  function onResize(e) {\n    raf(function () {\n      resizeTasks(getEvent(e));\n    });\n  }\n\n  function resizeTasks(e) {\n    if (!isOn) {\n      return;\n    }\n\n    if (nested === 'outer') {\n      events.emit('outerResized', info(e));\n    }\n\n    windowWidth = getWindowWidth();\n    var bpChanged,\n        breakpointZoneTem = breakpointZone,\n        needContainerTransform = false;\n\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone; // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n\n      if (bpChanged) {\n        events.emit('newBreakpointStart', info(e));\n      }\n    }\n\n    var indChanged,\n        itemsChanged,\n        itemsTem = items,\n        disableTem = disable,\n        freezeTem = freeze,\n        arrowKeysTem = arrowKeys,\n        controlsTem = controls,\n        navTem = nav,\n        touchTem = touch,\n        mouseDragTem = mouseDrag,\n        autoplayTem = autoplay,\n        autoplayHoverPauseTem = autoplayHoverPause,\n        autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n        indexTem = index;\n\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n          autoHeightTem = autoHeight,\n          controlsTextTem = controlsText,\n          centerTem = center,\n          autoplayTextTem = autoplayText;\n\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n            edgePaddingTem = edgePadding;\n      }\n    } // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n\n\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    } // update options\n\n\n    resetVariblesWhenDisable(disable);\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n\n        needContainerTransform = true;\n      }\n    }\n\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n      // fixedWidth: <= viewport, fixedWidth, gutter\n\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n      // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) {\n          indexMax = getIndexMax();\n        } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n\n\n        updateIndex();\n      }\n    }\n\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n      // <= fixedWidth: fixedWidth, gutter, rightBoundary\n      // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n\n    if (!autoplay) {\n      autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ? addEvents(doc, docmentKeydownEvent) : removeEvents(doc, docmentKeydownEvent);\n    }\n\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            showElement(prevButton);\n          }\n\n          if (nextButton) {\n            showElement(nextButton);\n          }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            hideElement(prevButton);\n          }\n\n          if (nextButton) {\n            hideElement(nextButton);\n          }\n        }\n      }\n    }\n\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer);\n      }\n    }\n\n    if (touch !== touchTem) {\n      touch ? addEvents(container, touchEvents, options.preventScrollOnTouch) : removeEvents(container, touchEvents);\n    }\n\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ? addEvents(container, dragEvents) : removeEvents(container, dragEvents);\n    }\n\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) {\n          showElement(autoplayButton);\n        }\n\n        if (!animating && !autoplayUserPaused) {\n          startAutoplay();\n        }\n      } else {\n        if (autoplayButton) {\n          hideElement(autoplayButton);\n        }\n\n        if (animating) {\n          stopAutoplay();\n        }\n      }\n    }\n\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ? addEvents(container, hoverEvents) : removeEvents(container, hoverEvents);\n    }\n\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ? addEvents(doc, visibilityEvent) : removeEvents(doc, visibilityEvent);\n    }\n\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) {\n        needContainerTransform = true;\n      }\n\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) {\n          innerWrapper.style.height = '';\n        }\n      }\n\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n            html = autoplayButton.innerHTML,\n            len = html.length - autoplayTextTem[i].length;\n\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) {\n        needContainerTransform = true;\n      }\n    }\n\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n\n    indChanged = index !== indexTem;\n\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) {\n        additionalUpdates();\n      }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n\n    if (itemsChanged && !carousel) {\n      updateGallerySlidePositions();\n    }\n\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          } // slide styles\n\n\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) + getSlideGutterStyle(gutter); // remove the last line and\n          // add new styles\n\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      } // auto height\n\n\n      if (autoHeight) {\n        doAutoHeight();\n      }\n\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n\n    if (bpChanged) {\n      events.emit('newBreakpointEnd', info(e));\n    }\n  } // === INITIALIZATION FUNCTIONS === //\n\n\n  function getFreeze() {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return slideCount <= a;\n    }\n\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n        vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n\n    return width <= vp;\n  }\n\n  function setBreakpointZone() {\n    breakpointZone = 0;\n\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n\n      if (windowWidth >= bp) {\n        breakpointZone = bp;\n      }\n    }\n  } // (slideBy, indexMin, indexMax) => index\n\n\n  var updateIndex = function () {\n    return loop ? carousel ? // loop + carousel\n    function () {\n      var leftEdge = indexMin,\n          rightEdge = indexMax;\n      leftEdge += slideBy;\n      rightEdge -= slideBy; // adjust edges when has edge paddings\n      // or fixed-width slider with extra space on the right side\n\n      if (edgePadding) {\n        leftEdge += 1;\n        rightEdge -= 1;\n      } else if (fixedWidth) {\n        if ((viewport + gutter) % (fixedWidth + gutter)) {\n          rightEdge -= 1;\n        }\n      }\n\n      if (cloneCount) {\n        if (index > rightEdge) {\n          index -= slideCount;\n        } else if (index < leftEdge) {\n          index += slideCount;\n        }\n      }\n    } : // loop + gallery\n    function () {\n      if (index > indexMax) {\n        while (index >= indexMin + slideCount) {\n          index -= slideCount;\n        }\n      } else if (index < indexMin) {\n        while (index <= indexMax - slideCount) {\n          index += slideCount;\n        }\n      }\n    } : // non-loop\n    function () {\n      index = Math.max(indexMin, Math.min(indexMax, index));\n    };\n  }();\n\n  function disableUI() {\n    if (!autoplay && autoplayButton) {\n      hideElement(autoplayButton);\n    }\n\n    if (!nav && navContainer) {\n      hideElement(navContainer);\n    }\n\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          hideElement(prevButton);\n        }\n\n        if (nextButton) {\n          hideElement(nextButton);\n        }\n      }\n    }\n  }\n\n  function enableUI() {\n    if (autoplay && autoplayButton) {\n      showElement(autoplayButton);\n    }\n\n    if (nav && navContainer) {\n      showElement(navContainer);\n    }\n\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          showElement(prevButton);\n        }\n\n        if (nextButton) {\n          showElement(nextButton);\n        }\n      }\n    }\n  }\n\n  function freezeSlider() {\n    if (frozen) {\n      return;\n    } // remove edge padding from inner wrapper\n\n\n    if (edgePadding) {\n      innerWrapper.style.margin = '0px';\n    } // add class tns-transparent to cloned slides\n\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          addClass(slideItems[i], str);\n        }\n\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n\n    disableUI();\n    frozen = true;\n  }\n\n  function unfreezeSlider() {\n    if (!frozen) {\n      return;\n    } // restore edge padding for inner wrapper\n    // for mordern browsers\n\n\n    if (edgePadding && CSSMQ) {\n      innerWrapper.style.margin = '';\n    } // remove class tns-transparent to cloned slides\n\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          removeClass(slideItems[i], str);\n        }\n\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n\n    enableUI();\n    frozen = false;\n  }\n\n  function disableSlider() {\n    if (disabled) {\n      return;\n    }\n\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          hideElement(slideItems[j]);\n        }\n\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // vertical slider\n\n\n    if (!horizontal || !carousel) {\n      removeAttrs(innerWrapper, ['style']);\n    } // gallery\n\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // update tools\n\n\n    disableUI();\n    disabled = true;\n  }\n\n  function enableSlider() {\n    if (!disabled) {\n      return;\n    }\n\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          showElement(slideItems[j]);\n        }\n\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // gallery\n\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n            classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    } // update tools\n\n\n    enableUI();\n    disabled = false;\n  }\n\n  function updateLiveRegion() {\n    var str = getLiveRegionStr();\n\n    if (liveregionCurrent.innerHTML !== str) {\n      liveregionCurrent.innerHTML = str;\n    }\n  }\n\n  function getLiveRegionStr() {\n    var arr = getVisibleSlideRange(),\n        start = arr[0] + 1,\n        end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n\n  function getVisibleSlideRange(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n\n    var start = index,\n        end,\n        rangestart,\n        rangeend; // get range start, range end for autoWidth and fixedWidth\n\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = -(parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    } // get start, end\n    // - check auto width\n\n\n    if (autoWidth) {\n      slidePositions.forEach(function (point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) {\n            start = i;\n          }\n\n          if (rangeend - point >= 0.5) {\n            end = i;\n          }\n        }\n      }); // - check percentage width, fixed width\n    } else {\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n\n        if (center || edgePadding) {\n          start = Math.floor(rangestart / cell);\n          end = Math.ceil(rangeend / cell - 1);\n        } else {\n          end = start + Math.ceil(viewport / cell) - 1;\n        }\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n\n    return [start, end];\n  }\n\n  function doLazyLoad() {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n\n          eve[TRANSITIONEND] = function (e) {\n            e.stopPropagation();\n          };\n\n          addEvents(img, eve);\n          addEvents(img, imgEvents); // update src\n\n          img.src = getAttr(img, 'data-src'); // update srcset\n\n          var srcset = getAttr(img, 'data-srcset');\n\n          if (srcset) {\n            img.srcset = srcset;\n          }\n\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n\n  function onImgLoaded(e) {\n    imgLoaded(getTarget(e));\n  }\n\n  function onImgFailed(e) {\n    imgFailed(getTarget(e));\n  }\n\n  function imgLoaded(img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n\n  function imgFailed(img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n\n  function imgCompleted(img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n\n  function getImageArray(start, end, imgSelector) {\n    var imgs = [];\n\n    if (!imgSelector) {\n      imgSelector = 'img';\n    }\n\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) {\n        imgs.push(img);\n      });\n      start++;\n    }\n\n    return imgs;\n  } // check if all visible images are loaded\n  // and update container height if it's done\n\n\n  function doAutoHeight() {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function () {\n      imgsLoadedCheck(imgs, updateInnerWrapperHeight);\n    });\n  }\n\n  function imgsLoadedCheck(imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) {\n      return cb();\n    } // check image classes\n\n\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) {\n        imgCompleted(img);\n      } // Check image.complete\n\n\n      if (hasClass(img, imgCompleteClass)) {\n        imgs.splice(index, 1);\n      }\n    }); // execute callback function if selected images are all complete\n\n    if (!imgs.length) {\n      return cb();\n    } // otherwise execute this functiona again\n\n\n    raf(function () {\n      imgsLoadedCheck(imgs, cb);\n    });\n  }\n\n  function additionalUpdates() {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n\n  function update_carousel_transition_duration() {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n\n  function getMaxSlideHeight(slideStart, slideRange) {\n    var heights = [];\n\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n\n    return Math.max.apply(null, heights);\n  } // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n\n\n  function updateInnerWrapperHeight() {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n        wp = middleWrapper ? middleWrapper : innerWrapper;\n\n    if (wp.style.height !== maxHeight) {\n      wp.style.height = maxHeight + 'px';\n    }\n  } // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n\n\n  function setSlidePositions() {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n        attr2 = horizontal ? 'right' : 'bottom',\n        base = slideItems[0].getBoundingClientRect()[attr];\n    forEach(slideItems, function (item, i) {\n      // skip the first slide\n      if (i) {\n        slidePositions.push(item.getBoundingClientRect()[attr] - base);\n      } // add the end edge\n\n\n      if (i === slideCountNew - 1) {\n        slidePositions.push(item.getBoundingClientRect()[attr2] - base);\n      }\n    });\n  } // update slide\n\n\n  function updateSlideStatus() {\n    var range = getVisibleSlideRange(),\n        start = range[0],\n        end = range[1];\n    forEach(slideItems, function (item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        } // hide slides\n\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  } // gallery: update slide position\n\n\n  function updateGallerySlidePositions() {\n    var l = index + Math.min(slideCount, items);\n\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      } // remove outlet animation\n\n\n      removeClass(item, animateOut);\n    } // removing '.tns-moving'\n\n\n    setTimeout(function () {\n      forEach(slideItems, function (el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  } // set tabindex on Nav\n\n\n  function updateNavStatus() {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n            navCurrent = navItems[navCurrentIndex];\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n        setAttrs(navCurrent, {\n          'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n        });\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n\n  function getLowerCaseNodeName(el) {\n    return el.nodeName.toLowerCase();\n  }\n\n  function isButton(el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n\n  function isAriaDisabled(el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n\n  function disEnableElement(isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  } // set 'disabled' to true on controls when reach the edges\n\n\n  function updateControlsStatus() {\n    if (!controls || rewind || loop) {\n      return;\n    }\n\n    var prevDisabled = prevIsButton ? prevButton.disabled : isAriaDisabled(prevButton),\n        nextDisabled = nextIsButton ? nextButton.disabled : isAriaDisabled(nextButton),\n        disablePrev = index <= indexMin ? true : false,\n        disableNext = !rewind && index >= indexMax ? true : false;\n\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  } // set duration\n\n\n  function resetDuration(el, str) {\n    if (TRANSITIONDURATION) {\n      el.style[TRANSITIONDURATION] = str;\n    }\n  }\n\n  function getSliderWidth() {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n\n  function getCenterGap(num) {\n    if (num == null) {\n      num = index;\n    }\n\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? (viewport - gap - (slidePositions[num + 1] - slidePositions[num] - gutter)) / 2 : fixedWidth ? (viewport - fixedWidth) / 2 : (items - 1) / 2;\n  }\n\n  function getRightBoundary() {\n    var gap = edgePadding ? gutter : 0,\n        result = viewport + gap - getSliderWidth();\n\n    if (center && !loop) {\n      result = fixedWidth ? -(fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() : getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n\n    if (result > 0) {\n      result = 0;\n    }\n\n    return result;\n  }\n\n  function getContainerTransformValue(num) {\n    if (num == null) {\n      num = index;\n    }\n\n    var val;\n\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = -(fixedWidth + gutter) * num;\n\n        if (center) {\n          val += getCenterGap();\n        }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n\n        if (center) {\n          num -= getCenterGap();\n        }\n\n        val = -num * 100 / denominator;\n      }\n    } else {\n      val = -slidePositions[num];\n\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n\n    if (hasRightDeadZone) {\n      val = Math.max(val, rightBoundary);\n    }\n\n    val += horizontal && !autoWidth && !fixedWidth ? '%' : 'px';\n    return val;\n  }\n\n  function doContainerTransformSilent(val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n\n  function doContainerTransform(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n\n  function animateSlide(number, classOut, classIn, isOut) {\n    var l = number + items;\n\n    if (!loop) {\n      l = Math.min(l, slideCountNew);\n    }\n\n    for (var i = number; i < l; i++) {\n      var item = slideItems[i]; // set item positions\n\n      if (!isOut) {\n        item.style.left = (i - index) * 100 / items + '%';\n      }\n\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n\n      removeClass(item, classOut);\n      addClass(item, classIn);\n\n      if (isOut) {\n        slideItemsOut.push(item);\n      }\n    }\n  } // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n\n\n  var transformCore = function () {\n    return carousel ? function () {\n      resetDuration(container, '');\n\n      if (TRANSITIONDURATION || !speed) {\n        // for morden browsers with non-zero duration or\n        // zero duration for all browsers\n        doContainerTransform(); // run fallback function manually\n        // when duration is 0 / container is hidden\n\n        if (!speed || !isVisible(container)) {\n          onTransitionEnd();\n        }\n      } else {\n        // for old browser with non-zero duration\n        jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n      }\n\n      if (!horizontal) {\n        updateContentWrapperHeight();\n      }\n    } : function () {\n      slideItemsOut = [];\n      var eve = {};\n      eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n      removeEvents(slideItems[indexCached], eve);\n      addEvents(slideItems[index], eve);\n      animateSlide(indexCached, animateIn, animateOut, true);\n      animateSlide(index, animateNormal, animateIn); // run fallback function manually\n      // when transition or animation not supported / duration is 0\n\n      if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) {\n        onTransitionEnd();\n      }\n    };\n  }();\n\n  function render(e, sliderMoved) {\n    if (updateIndexBeforeTransform) {\n      updateIndex();\n    } // render when slider was moved (touch or drag) even though index may not change\n\n\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n\n      if (autoHeight) {\n        doAutoHeight();\n      } // pause autoplay when click or keydown from user\n\n\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) {\n        stopAutoplay();\n      }\n\n      running = true;\n      transformCore();\n    }\n  }\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n\n\n  function strTrans(str) {\n    return str.toLowerCase().replace(/-/g, '');\n  } // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n\n\n  function onTransitionEnd(event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i]; // set item positions\n\n          item.style.left = '';\n\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n\n\n      if (!event || !carousel && event.target.parentNode === container || event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n            doContainerTransformSilent();\n          }\n        }\n\n        if (nested === 'inner') {\n          events.emit('innerLoaded', info());\n        }\n\n        running = false;\n        indexCached = index;\n      }\n    }\n  } // # ACTIONS\n\n\n  function goTo(targetIndex, e) {\n    if (freeze) {\n      return;\n    } // prev slideBy\n\n\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1); // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1); // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) {\n          return;\n        } else {\n          onTransitionEnd();\n        }\n      }\n\n      var absIndex = getAbsIndex(),\n          indexGap = 0;\n\n      if (targetIndex === 'first') {\n        indexGap = -absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') {\n          targetIndex = parseInt(targetIndex);\n        }\n\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) {\n            targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex));\n          }\n\n          indexGap = targetIndex - absIndex;\n        }\n      } // gallery: make sure new page won't overlap with current page\n\n\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += index + indexGap - slideCount >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n\n      index += indexGap; // make sure index is in range\n\n      if (carousel && loop) {\n        if (index < indexMin) {\n          index += slideCount;\n        }\n\n        if (index > indexMax) {\n          index -= slideCount;\n        }\n      } // if index is changed, start rendering\n\n\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n    }\n  } // on controls click\n\n\n  function onControlsClick(e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    var passEventObject;\n\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) {\n        target = target.parentNode;\n      }\n\n      var targetIn = [prevButton, nextButton].indexOf(target);\n\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n\n    if (dir) {\n      index += slideBy * dir;\n\n      if (autoWidth) {\n        index = Math.floor(index);\n      } // pass e when click control buttons or keydown\n\n\n      render(passEventObject || e && e.type === 'keydown' ? e : null);\n    }\n  } // on nav click\n\n\n  function onNavClick(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    e = getEvent(e);\n    var target = getTarget(e),\n        navIndex; // find the clicked nav item\n\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) {\n      target = target.parentNode;\n    }\n\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n          targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n          targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n\n      if (navCurrentIndex === navIndex) {\n        if (animating) {\n          stopAutoplay();\n        }\n\n        navClicked = -1; // reset navClicked\n      }\n    }\n  } // autoplay functions\n\n\n  function setAutoplayTimer() {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n    animating = true;\n  }\n\n  function stopAutoplayTimer() {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n\n  function updateAutoplayButton(action, txt) {\n    setAttrs(autoplayButton, {\n      'data-action': action\n    });\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n\n  function startAutoplay() {\n    setAutoplayTimer();\n\n    if (autoplayButton) {\n      updateAutoplayButton('stop', autoplayText[1]);\n    }\n  }\n\n  function stopAutoplay() {\n    stopAutoplayTimer();\n\n    if (autoplayButton) {\n      updateAutoplayButton('start', autoplayText[0]);\n    }\n  } // programaitcally play/pause the slider\n\n\n  function play() {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function pause() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n\n  function toggleAutoplay() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function onVisibilityChange() {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n\n  function mouseoverPause() {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n\n  function mouseoutRestart() {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  } // keydown events on document\n\n\n  function onDocumentKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  } // on key control\n\n\n  function onControlsKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) {\n          onControlsClick(e, -1);\n        }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  } // set focus\n\n\n  function setFocus(el) {\n    el.focus();\n  } // on key nav\n\n\n  function onNavKeydown(e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n\n    if (!hasAttr(curElement, 'data-nav')) {\n      return;\n    } // var code = e.keyCode,\n\n\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n        navIndex = Number(getAttr(curElement, 'data-nav'));\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) {\n          setFocus(navItems[navIndex - 1]);\n        }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) {\n          setFocus(navItems[navIndex + 1]);\n        }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n\n  function getEvent(e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n\n  function getTarget(e) {\n    return e.target || win.event.srcElement;\n  }\n\n  function isTouchEvent(e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n\n  function preventDefaultBehavior(e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n\n  function getMoveDirectionExpected() {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n\n  function onPanStart(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    if (autoplay && animating) {\n      stopAutoplayTimer();\n    }\n\n    panStart = true;\n\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n\n  function onPanMove(e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n\n      if (carousel) {\n        if (!rafIndex) {\n          rafIndex = raf(function () {\n            panUpdate(e);\n          });\n        }\n      } else {\n        if (moveDirectionExpected === '?') {\n          moveDirectionExpected = getMoveDirectionExpected();\n        }\n\n        if (moveDirectionExpected) {\n          preventScroll = true;\n        }\n      }\n\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  function panUpdate(e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n\n    caf(rafIndex);\n\n    if (panStart) {\n      rafIndex = raf(function () {\n        panUpdate(e);\n      });\n    }\n\n    if (moveDirectionExpected === '?') {\n      moveDirectionExpected = getMoveDirectionExpected();\n    }\n\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) {\n        preventScroll = true;\n      }\n\n      try {\n        if (e.type) {\n          events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e));\n        }\n      } catch (err) {}\n\n      var x = translateInit,\n          dist = getDist(lastPosition, initPosition);\n\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew) : dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n\n  function onPanEnd(e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n\n      if (carousel) {\n        resetDuration(container, '');\n      }\n\n      panStart = false;\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {\n            'click': function preventClick(e) {\n              preventDefaultBehavior(e);\n              removeEvents(target, {\n                'click': preventClick\n              });\n            }\n          });\n        }\n\n        if (carousel) {\n          rafIndex = raf(function () {\n            if (horizontal && !autoWidth) {\n              var indexMoved = -dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = -(translateInit + dist);\n\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n\n                  if (moved > slidePositions[i] && dist < 0) {\n                    index += 1;\n                  }\n\n                  i++;\n                }\n              }\n            }\n\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    } // reset\n\n\n    if (options.preventScrollOnTouch === 'auto') {\n      preventScroll = false;\n    }\n\n    if (swipeAngle) {\n      moveDirectionExpected = '?';\n    }\n\n    if (autoplay && !animating) {\n      setAutoplayTimer();\n    }\n  } // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n\n\n  function updateContentWrapperHeight() {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n\n  function getPages() {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n\n\n  function updateNavVisibility() {\n    if (!nav || navAsThumbnails) {\n      return;\n    }\n\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n          max = pages,\n          fn = showElement;\n\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      } // cache pages\n\n\n      pagesCached = pages;\n    }\n  }\n\n  function info(e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {}\n    };\n  }\n\n  return {\n    version: '2.9.4',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function () {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};\n\nexports.tns = tns;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}